{{define "cgl_tmplt"}}
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading panel-default" style="text-align: center; color: blue;">
                    {{if eq .CGLResponse.Data.Client.BasicDetails.Name.Given ""}}<span style="color: red;">No CGL Patient Record Found for {{.Query.Nhs}}</span>
                    {{else}}CGL Patient Record for {{.Query.Nhs}}
                </div>
                <div class="panel-body">
                    <table class="table table-condensed table-striped">
                        <thead>
                            <tr>
                                <td data-toggle="collapse" data-target="#cgl1" class="accordion-toggle"><span class="glyphicon glyphicon-chevron-down"></span> Encounters</td>
                                <td data-toggle="collapse" data-target="#cgl2" class="accordion-toggle"><span class="glyphicon glyphicon-chevron-down"></span> Drug Tests</td>
                                <td data-toggle="collapse" data-target="#cgl3" class="accordion-toggle"><span class="glyphicon glyphicon-chevron-down"></span> Mental Health</td>
                                <td data-toggle="collapse" data-target="#cgl4" class="accordion-toggle"><span class="glyphicon glyphicon-chevron-down"></span> Risks</td>
                                <td data-toggle="collapse" data-target="#cgl5" class="accordion-toggle"><span class="glyphicon glyphicon-chevron-down"></span> Patient ID's</td>
                            </tr>
                            <tr class="info">
                                <th>Fist Name</th>
                                <th>Last Name</th>
                                <th>D.O.B</th>
                                <th>Gender</th>
                                <th>Street</th>
                                <th>City</th>
                                <th>County</th>
                                <th>Postcode</th>
                                <th>Disabilities</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Name.Given}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Name.Family}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.BirthDate}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.SexAtBirth}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Address.AddressLine1}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Address.AddressLine2}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Address.AddressLine3}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Address.PostCode}}</td>
                                <td>{{.CGLResponse.Data.Client.BasicDetails.Disability}}</td>
                            </tr>
                            <tr> 
                                <td colspan="12" class="hiddenRow">
                                    <div class="accordian-body collapse" id="cgl1">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr class="info">
                                                    <th>Last Engagement</th>
                                                    <th>Last Face to Face</th>
                                                    <th>Next Appointment</th>
                                                    <th>Key Worker Name</th>
                                                    <th>Key Worker Tel</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr>
                                                    <td>{{.CGLResponse.Data.Client.BasicDetails.LastEngagementByCGLDate}}</td>
                                                    <td>{{.CGLResponse.Data.Client.BasicDetails.LastFaceToFaceEngagementDate}}</td>
                                                    <td>{{.CGLResponse.Data.Client.BasicDetails.NextCGLAppointmentDate}}</td>
                                                    <td>{{.CGLResponse.Data.KeyWorker.Name.Given}} {{.CGLResponse.Data.KeyWorker.Name.Family}}</td>
                                                    <td>{{.CGLResponse.Data.KeyWorker.Telecom}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12" class="hiddenRow">
                                    <div class="accordian-body collapse" id="cgl2">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr class="info">
                                                    <th>BBV Tested</th>
                                                    <th>HepC Last Test Date</th>
                                                    <th>HepC Result</th>
                                                    <th>HIV Positive</th>
                                                    <th>Injecting</th>
                                                    <th>Poly Drugs Use</th>
                                                    <th>Previous Overdose</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    {{if eq .CGLResponse.Data.Client.BbvInformation.BbvTested "Yes"}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{else}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                    <td>{{.CGLResponse.Data.Client.BbvInformation.HepCLastTestDate}}</td>
                                                    <td>{{.CGLResponse.Data.Client.BbvInformation.HepCResult}}</td>
                                                    {{if eq .CGLResponse.Data.Client.BbvInformation.HivPositive "Yes"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{else}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.SubstanceMisuseDomain.Injecting}}</td>
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.SubstanceMisuseDomain.PolyDrugUse}}</td>
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.SubstanceMisuseDomain.PreviousOverDose}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12" class="hiddenRow">
                                    <div class="accordian-body collapse" id="cgl3">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr class="info">
                                                    <th>Reported</th>
                                                    <th>Suicide Attmpt</th>
                                                    <th>Condition</th>
                                                    <th>Admissions</th>
                                                    <th>Non Compliance</th>
                                                    <th>Interventions</th>
                                                    <th>Capacity</th>
                                                    <th>Learning Disability</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.LastSelfReportedDate}}</td>
                                                    
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.AttemptedSuicide "Current"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.AttemptedSuicide "Previous"}}
                                                    <td style="color: orange;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.AttemptedSuicide ""}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                    
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.DiagnosedMentalHealthCondition}}</td>
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.HospitalAdmissionsForMentalHealth}}</td>
                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.NotTakingPrescribedMedicationAsInstructed}}</td>
                                                    
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.PsychiatricOrPreviousCrisisTeamIntervention "Current"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.PsychiatricOrPreviousCrisisTeamIntervention "Previous"}}
                                                    <td style="color: orange;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.MentalHealthDomain.PsychiatricOrPreviousCrisisTeamIntervention ""}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}

                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.RiskOfHarmToSelfDomain.AssessedAsNotHavingMentalCapacity "Current"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.RiskOfHarmToSelfDomain.AssessedAsNotHavingMentalCapacity "Previous"}}
                                                    <td style="color: orange;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.RiskOfHarmToSelfDomain.AssessedAsNotHavingMentalCapacity ""}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}

                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.RiskOfHarmToSelfDomain.LearningDisability "Current"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.RiskOfHarmToSelfDomain.LearningDisability "Previous"}}
                                                    <td style="color: orange;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.RiskOfHarmToSelfDomain.LearningDisability ""}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12" class="hiddenRow">
                                    <div class="accordian-body collapse" id="cgl4">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr class="info">
                                                    <th>No Fixed Abode</th>
                                                    <th>Housing at Risk</th>
                                                    <th>Socially Isolated</th>
                                                    <th>From others</th>
                                                    <th>To Adults</th>
                                                    <th>To Children or YP</th>
                                                    <th>To Self</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.SocialDomain.HomelessRoughSleepingNFA "Current"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.SocialDomain.HomelessRoughSleepingNFA "Previous"}}
                                                    <td style="color: orange;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.SocialDomain.HomelessRoughSleepingNFA ""}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}

                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.SocialDomain.HousingAtRisk "Current"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.SocialDomain.HousingAtRisk "Previous"}}
                                                    <td style="color: orange;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{end}}
                                                    {{if eq .CGLResponse.Data.Client.RiskInformation.SocialDomain.HousingAtRisk ""}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}

                                                    <td>{{.CGLResponse.Data.Client.RiskInformation.SocialDomain.SociallyIsolatedNoSupport}}</td>
                                                    
                                                    {{if eq .CGLResponse.Data.Client.SafeguardingInformation.RiskHarmFromOthers "Yes"}}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{else}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}

                                                    {{if eq .CGLResponse.Data.Client.SafeguardingInformation.RiskToAdults "Yes" }}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{else}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                    
                                                    {{if eq .CGLResponse.Data.Client.SafeguardingInformation.RiskToChildrenOrYP "Yes" }}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{else}}
                                                    <td> style="color: green;"<i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                    
                                                    {{if eq .CGLResponse.Data.Client.SafeguardingInformation.RiskToSelf "Yes" }}
                                                    <td style="color: red;"><i class="glyphicon glyphicon-ok"></i></td>
                                                    {{else}}
                                                    <td style="color: green;"><i class="glyphicon glyphicon-remove"></i></td>
                                                    {{end}}
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12" class="hiddenRow">
                                    <div class="accordian-body collapse" id="cgl5">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr class="info">
                                                    <th>CGL ID</th>
                                                    <th>NHS ID</th>
                                                    <th>Key Worker ID</th>
                                                </tr>
                                            </thead>
                            
                                            <tbody>
                                                <tr>
                                                    <td>{{.CGLResponse.Data.Client.BasicDetails.LocalIdentifier}}</td>
                                                    <td>{{.CGLResponse.Data.Client.BasicDetails.NhsNumber}}</td>
                                                    <td>{{.CGLResponse.Data.KeyWorker.LocalIdentifier}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    {{end}}
                </div>
            </div>
        </div>
    </div>
{{end}}