{{define "publishfile2t_tmplt"}}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>ICB Workflow Service</title>
    <style>
        #drop-area {
            border: 2px dashed #ccc;
            border-radius: 5px;
            padding: 25px;
            text-align: center;
            font-size: 20px;
            margin-bottom: 20px;
        }

        #drop-area.dragging {
            border-color: #009688;
        }
    </style>
</head>

<body>
    <h1 style="text-align: center;">{{.Query.Act}}</h1>
    <form method="POST" action="/spa/publisher/upload" enctype="multipart/form-data">
        <div id="drop-area">
            <p id="drop-area-p">Drag and drop your file here, then click {{.Query.Act}}</p>
            <input type="file" id="file" name="file" style="display: none;">
        </div>
        <input hidden type="text" id="act" name="act" value="{{.Query.Act}}">
        <input hidden type="text" id="pathway" name="pathway" style="display: none;" value="{{.Query.Pathway}}">
        <input hidden type="text" id="expression" name="expression" style="display: none;" , value="{{.Query.Expression}}">
        <input hidden type="text" id="topic" name="topic" style="display: none;" , value="{{.Query.Topic}}">
        <input hidden type="text" id="vers" name="vers" style="display: none;" , value="{{.Query.Vers}}">
        <input hidden type="text" id="nhs" name="nhs" style="display: none;" , value="{{.Query.Nhs}}">

        <button type="submit">{{.Query.Act}}</button>
    </form>
    <script>
        const dropArea = document.getElementById('drop-area');

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false)
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false)
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false)
        });

        function highlight(e) {
            dropArea.classList.add('dragging');
        }

        function unhighlight(e) {
            dropArea.classList.remove('dragging');
        }

        dropArea.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const fileInput = document.getElementById('file');
            const files = e.dataTransfer.files;
            fileInput.files = files;
            document.getElementById("drop-area-p").innerHTML = files[0].name
        }
    </script>
</body>

</html>

{{end}}