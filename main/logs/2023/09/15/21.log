2023/09/15 21:00:58.032627 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/15 21:00:58.033137 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/15 21:00:58.033266 ttdb.go:54: Opened Database
2023/09/15 21:00:58.245747 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/15 21:00:58.304402 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/15 21:00:58.304456 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/15 21:00:58.363607 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/15 21:00:58.451012 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/15 21:00:58.451068 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/15 21:00:58.511900 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/15 21:00:58.572026 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/15 21:00:58.572081 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/15 21:00:58.630097 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/15 21:00:58.691580 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/15 21:00:58.691634 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/15 21:00:58.752688 ttdb.go:379: Persisting Template notification_tmplt
2023/09/15 21:00:58.818787 ttdb.go:385: Persisted Template notification_tmplt
2023/09/15 21:00:58.818843 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/15 21:00:58.882107 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/15 21:00:58.999764 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/15 21:00:58.999806 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/15 21:00:59.063972 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/15 21:00:59.128907 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/15 21:00:59.128992 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/15 21:00:59.194003 ttdb.go:379: Persisting Template react_tmplt
2023/09/15 21:00:59.256619 ttdb.go:385: Persisted Template react_tmplt
2023/09/15 21:00:59.256648 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/15 21:00:59.320014 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/15 21:00:59.389295 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/15 21:00:59.389341 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/15 21:00:59.453927 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/15 21:00:59.518060 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/15 21:00:59.518106 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/15 21:00:59.581463 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/15 21:00:59.659906 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/15 21:00:59.659972 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/15 21:00:59.725147 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/15 21:00:59.804911 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/15 21:00:59.805053 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/15 21:00:59.869466 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/15 21:00:59.941787 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/15 21:00:59.941854 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/15 21:01:00.005991 ttdb.go:379: Persisting Template pds_tmplt
2023/09/15 21:01:00.268850 ttdb.go:385: Persisted Template pds_tmplt
2023/09/15 21:01:00.268907 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/15 21:01:00.344312 ttdb.go:379: Persisting Template error_tmplt
2023/09/15 21:01:00.425275 ttdb.go:385: Persisted Template error_tmplt
2023/09/15 21:01:00.425332 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/15 21:01:00.491560 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/15 21:01:00.554430 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/15 21:01:00.554540 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/15 21:01:00.622250 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/15 21:01:00.691313 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/15 21:01:00.691624 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/15 21:01:00.756377 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/15 21:01:00.829776 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/15 21:01:00.829953 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/15 21:01:00.898452 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/15 21:01:00.969186 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/15 21:01:00.969365 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/15 21:01:01.032907 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/15 21:01:01.105781 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/15 21:01:01.105918 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/15 21:01:01.171040 ttdb.go:379: Persisting Template events_tmplt
2023/09/15 21:01:01.241430 ttdb.go:385: Persisted Template events_tmplt
2023/09/15 21:01:01.241492 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/15 21:01:01.318898 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/15 21:01:01.388217 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/15 21:01:01.388266 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/15 21:01:01.388402 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/15 21:01:06.781013 ttgethandler.go:10: Processing new GET Request
2023/09/15 21:01:06.781193 ttproxy.go:138: 	Request Query Params
2023/09/15 21:01:06.781539 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "2tsolutions",
  "Role": "clinical",
  "Nhs": "9000000009"
}
2023/09/15 21:01:06.781571 ttgethandler.go:15: Path = /beta/spa/consumer/patient
2023/09/15 21:01:06.781607 tttmplts.go:30: PIXm Worker starting
2023/09/15 21:01:06.781826 tthttp.go:15: Creating PIXm PDQ - Server URL http://lac-demo-01.tianispirit.co.uk:8081/SpiritPIXFhir/r4/Patient?identifier=2.16.840.1.113883.2.1.4.1%7C9000000009
2023/09/15 21:01:06.781606 tttmplts.go:37: CGL Worker starting
2023/09/15 21:01:06.785515 tthttp.go:160: Request Headers 
map[Content-Type:[application/json]]
2023/09/15 21:01:06.785676 tthttp.go:160: Request Headers 
map[Accept:[application/json] X-Api-Key:[FNhb#OhxWiEiMdf+@6085k5Zmt] X-Api-Secret:[9710ea0fb4ffb5d56c2e62c71c30bdfhjsyr56a79d]]
2023/09/15 21:01:07.059484 tthttp.go:174: Server Response - Status Code 404 
{"errors":[{"message":"No clients matching nhs number 9000000009","path":"\/"}],"status":404}
2023/09/15 21:01:07.065222 ttutil.go:140: 	{
  "data": {
    "client": {
      "basicDetails": {
        "address": {},
        "name": {}
      },
      "bbvInformation": {},
      "drugTestResults": {
        "results": {}
      },
      "riskInformation": {
        "mentalHealthDomain": {},
        "riskOfHarmToSelfDomain": {},
        "socialDomain": {},
        "substanceMisuseDomain": {}
      },
      "safeguardingInformation": {}
    },
    "keyWorker": {
      "name": {}
    }
  }
}
2023/09/15 21:01:07.065353 tttmplts.go:39: CGL Worker done
2023/09/15 21:01:07.065381 tttmplts.go:40: CGL Worker Status Code 404
2023/09/15 21:01:11.783947 tthttp.go:174: Server Response - Status Code 0 
2023/09/15 21:01:11.784548 tttmplts.go:32: PIXm Worker done
2023/09/15 21:01:11.784639 tttmplts.go:33: PIXm Worker Status Code 408
2023/09/15 21:01:11.784971 tthttp.go:56: Creating PDS Search Request - Server URL https://sandbox.api.service.nhs.uk/personal-demographics/FHIR/R4/Patient/9000000009
2023/09/15 21:01:11.785211 tthttp.go:160: Request Headers 
map[Accept:[*/*] Content-Type:[application/json] X-Request-Id:[c632794f-ff36-4d19-a6f6-357445b01b40]]
2023/09/15 21:01:11.931831 tthttp.go:174: Server Response - Status Code 200 
{"resourceType":"Patient","id":"9000000009","identifier":[{"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9000000009","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0","code":"01","display":"Number present and verified"}]}}]}],"meta":{"versionId":"2","security":[{"system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality","code":"U","display":"unrestricted"}]},"name":[{"id":"123","use":"usual","period":{"start":"2020-01-01","end":"2021-12-31"},"given":["Jane"],"family":"Smith","prefix":["Mrs"],"suffix":["MBE"]}],"gender":"female","birthDate":"2010-10-22","multipleBirthInteger":1,"deceasedDateTime":"2010-10-22T00:00:00+00:00","generalPractitioner":[{"id":"254406A3","type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}}],"managingOrganization":{"type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}},"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y23456"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y34567"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus","extension":[{"url":"deathNotificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus","version":"1.0.0","code":"2","display":"Formal - death notice received from Registrar of Deaths"}]}},{"url":"systemEffectiveDate","valueDateTime":"2010-10-22T00:00:00+00:00"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication","extension":[{"url":"language","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage","version":"1.0.0","code":"fr","display":"French"}]}},{"url":"interpreterRequired","valueBoolean":true}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference","extension":[{"url":"PreferredWrittenCommunicationFormat","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat","code":"12","display":"Braille"}]}},{"url":"PreferredContactMethod","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod","code":"1","display":"Letter"}]}},{"url":"PreferredContactTimes","valueString":"Not after 7pm"}]},{"url":"http://hl7.org/fhir/StructureDefinition/patient-birthPlace","valueAddress":{"city":"Manchester","district":"Greater Manchester","country":"GBR"}},{"url":"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration","extension":[{"url":"removalFromRegistrationCode","valueCodeableConcept":{"coding":[{"system":"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode","code":"SCT","display":"Transferred to Scotland"}]}},{"url":"effectiveTime","valuePeriod":{"start":"2020-01-01T00:00:00+00:00","end":"2021-12-31T00:00:00+00:00"}}]}],"telecom":[{"id":"789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"phone","value":"01632960587","use":"home"},{"id":"790","period":{"start":"2019-01-01","end":"2022-12-31"},"system":"email","value":"jane.smith@example.com","use":"home"},{"id":"OC789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"other","value":"01632960587","use":"home","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem","code":"textphone","display":"Minicom (Textphone)"}}]}],"contact":[{"id":"C123","period":{"start":"2020-01-01","end":"2021-12-31"},"relationship":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v2-0131","code":"C","display":"Emergency Contact"}]}],"telecom":[{"system":"phone","value":"01632960587"}]}],"address":[{"id":"456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"home","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]},{"id":"T456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"temp","text":"Student Accommodation","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]}]}
2023/09/15 21:01:12.123673 tttmplts.go:100: Caching 24 Templates
2023/09/15 21:01:12.135082 tttmplts.go:87: Processing Template allpatientSrvs_tmplt
2023/09/15 21:01:12.212118 tttmplts.go:93: template: pdsretrieve_tmplt:191:50: executing "pdsretrieve_tmplt" at <$ext.ValueString>: can't evaluate field ValueString in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/15 21:01:12.212497 ttproxy.go:105: template: pdsretrieve_tmplt:191:50: executing "pdsretrieve_tmplt" at <$ext.ValueString>: can't evaluate field ValueString in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/15 21:01:12.212590 ttproxy.go:149: Response Status Code 500
2023/09/15 21:01:12.212619 ttproxy.go:151: 
2023/09/15 21:01:12.212647 ttproxy.go:152: Response Headers
2023/09/15 21:01:12.212846 ttutil.go:140: 	{
  "Access-Control-Allow-Origin": "*",
  "Content-Type": "",
  "Server": "Workflow Service"
}
2023/09/15 21:01:12.212878 ttproxy.go:154: ----------------
2023/09/15 21:01:12.212897 ttproxy.go:155: Response
2023/09/15 21:01:12.212915 ttproxy.go:156: ----------------
2023/09/15 21:01:12.213451 ttutil.go:140: 	{
  "Host": "MacBook-Pro-3.lan",
  "Path": "/beta/spa/consumer/patient",
  "Method": "GET",
  "SourceIP": "[::1]:60587",
  "ReqContentType": "",
  "RspContentType": "",
  "ResponseBody": "{\"resourceType\":\"Patient\",\"id\":\"9000000009\",\"identifier\":[{\"system\":\"https://fhir.nhs.uk/Id/nhs-number\",\"value\":\"9000000009\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus\",\"version\":\"1.0.0\",\"code\":\"01\",\"display\":\"Number present and verified\"}]}}]}],\"meta\":{\"versionId\":\"2\",\"security\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\",\"code\":\"U\",\"display\":\"unrestricted\"}]},\"name\":[{\"id\":\"123\",\"use\":\"usual\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"given\":[\"Jane\"],\"family\":\"Smith\",\"prefix\":[\"Mrs\"],\"suffix\":[\"MBE\"]}],\"gender\":\"female\",\"birthDate\":\"2010-10-22\",\"multipleBirthInteger\":1,\"deceasedDateTime\":\"2010-10-22T00:00:00+00:00\",\"generalPractitioner\":[{\"id\":\"254406A3\",\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}}],\"managingOrganization\":{\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}},\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y23456\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y34567\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",\"extension\":[{\"url\":\"deathNotificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\"version\":\"1.0.0\",\"code\":\"2\",\"display\":\"Formal - death notice received from Registrar of Deaths\"}]}},{\"url\":\"systemEffectiveDate\",\"valueDateTime\":\"2010-10-22T00:00:00+00:00\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication\",\"extension\":[{\"url\":\"language\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage\",\"version\":\"1.0.0\",\"code\":\"fr\",\"display\":\"French\"}]}},{\"url\":\"interpreterRequired\",\"valueBoolean\":true}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference\",\"extension\":[{\"url\":\"PreferredWrittenCommunicationFormat\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",\"code\":\"12\",\"display\":\"Braille\"}]}},{\"url\":\"PreferredContactMethod\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod\",\"code\":\"1\",\"display\":\"Letter\"}]}},{\"url\":\"PreferredContactTimes\",\"valueString\":\"Not after 7pm\"}]},{\"url\":\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace\",\"valueAddress\":{\"city\":\"Manchester\",\"district\":\"Greater Manchester\",\"country\":\"GBR\"}},{\"url\":\"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration\",\"extension\":[{\"url\":\"removalFromRegistrationCode\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode\",\"code\":\"SCT\",\"display\":\"Transferred to Scotland\"}]}},{\"url\":\"effectiveTime\",\"valuePeriod\":{\"start\":\"2020-01-01T00:00:00+00:00\",\"end\":\"2021-12-31T00:00:00+00:00\"}}]}],\"telecom\":[{\"id\":\"789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"phone\",\"value\":\"01632960587\",\"use\":\"home\"},{\"id\":\"790\",\"period\":{\"start\":\"2019-01-01\",\"end\":\"2022-12-31\"},\"system\":\"email\",\"value\":\"jane.smith@example.com\",\"use\":\"home\"},{\"id\":\"OC789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"other\",\"value\":\"01632960587\",\"use\":\"home\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem\",\"code\":\"textphone\",\"display\":\"Minicom (Textphone)\"}}]}],\"contact\":[{\"id\":\"C123\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"relationship\":[{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0131\",\"code\":\"C\",\"display\":\"Emergency Contact\"}]}],\"telecom\":[{\"system\":\"phone\",\"value\":\"01632960587\"}]}],\"address\":[{\"id\":\"456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"home\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]},{\"id\":\"T456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"temp\",\"text\":\"Student Accommodation\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]}]}",
  "StatusCode": 500,
  "IsBase64": false,
  "Timeout": 0
}
2023/09/15 21:01:12.213527 ttproxy.go:158: -------------
2023/09/15 21:01:12.213546 ttproxy.go:160: Error template: pdsretrieve_tmplt:191:50: executing "pdsretrieve_tmplt" at <$ext.ValueString>: can't evaluate field ValueString in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/15 21:01:12.213559 ttproxy.go:161: -------------
