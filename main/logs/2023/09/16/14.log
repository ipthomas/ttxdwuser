2023/09/16 14:34:22.471976 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/16 14:34:22.472511 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/16 14:34:22.472639 ttdb.go:54: Opened Database
2023/09/16 14:34:22.700932 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/16 14:34:22.766924 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/16 14:34:22.767175 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/16 14:34:22.832901 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/16 14:34:22.932104 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/16 14:34:22.932246 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/16 14:34:22.997710 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/16 14:34:23.069677 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/16 14:34:23.069869 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/16 14:34:23.133247 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/16 14:34:23.197214 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/16 14:34:23.197276 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/16 14:34:23.260770 ttdb.go:379: Persisting Template notification_tmplt
2023/09/16 14:34:23.327260 ttdb.go:385: Persisted Template notification_tmplt
2023/09/16 14:34:23.327286 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/16 14:34:23.391690 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/16 14:34:23.509198 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/16 14:34:23.509335 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/16 14:34:23.575704 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/16 14:34:23.643526 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/16 14:34:23.643553 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/16 14:34:23.708679 ttdb.go:379: Persisting Template react_tmplt
2023/09/16 14:34:23.772020 ttdb.go:385: Persisted Template react_tmplt
2023/09/16 14:34:23.772055 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/16 14:34:23.835678 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/16 14:34:23.901468 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/16 14:34:23.901491 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/16 14:34:23.965407 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/16 14:34:24.028932 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/16 14:34:24.028955 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/16 14:34:24.092976 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/16 14:34:24.171015 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/16 14:34:24.171176 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/16 14:34:24.236934 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/16 14:34:24.317524 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/16 14:34:24.317687 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/16 14:34:24.383655 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/16 14:34:24.454062 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/16 14:34:24.454161 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/16 14:34:24.518732 ttdb.go:379: Persisting Template pds_tmplt
2023/09/16 14:34:24.586573 ttdb.go:385: Persisted Template pds_tmplt
2023/09/16 14:34:24.586714 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/16 14:34:24.651894 ttdb.go:379: Persisting Template error_tmplt
2023/09/16 14:34:24.715548 ttdb.go:385: Persisted Template error_tmplt
2023/09/16 14:34:24.715639 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/16 14:34:24.780796 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/16 14:34:24.844141 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/16 14:34:24.844288 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/16 14:34:24.908897 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/16 14:34:24.976388 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/16 14:34:24.976408 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/16 14:34:25.040588 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/16 14:34:25.105537 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/16 14:34:25.105568 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/16 14:34:25.168611 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/16 14:34:25.236955 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/16 14:34:25.237044 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/16 14:34:25.302179 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/16 14:34:25.374120 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/16 14:34:25.374245 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/16 14:34:25.438623 ttdb.go:379: Persisting Template events_tmplt
2023/09/16 14:34:25.507625 ttdb.go:385: Persisted Template events_tmplt
2023/09/16 14:34:25.507773 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/16 14:34:25.574955 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/16 14:34:25.640407 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/16 14:34:25.640522 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/16 14:34:25.640805 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/16 14:34:44.798603 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:44.798718 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:44.799003 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:44.799026 ttgethandler.go:15: Path = /
2023/09/16 14:34:44.985846 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:44.996797 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:45.000002 server.go:3217: http: panic serving [::1]:51437: runtime error: invalid memory address or nil pointer dereference
goroutine 19 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc0002162b8?, 0xc000419fe8?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).getErrorTemplate(...)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:86
main.(*Trans).newGetHandler(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:79 +0xc45
main.(*Trans).newProxyTrans(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc00021a7e0}, 0xc000256000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc00022a0c6?, {0x15657d0?, 0xc00021a7e0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc000206420?}, {0x15657d0, 0xc00021a7e0}, 0xc000256000)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000197560, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:45.009076 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:45.009134 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:45.009173 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:45.009186 ttgethandler.go:15: Path = /
2023/09/16 14:34:45.094335 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:45.101744 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:45.102474 server.go:3217: http: panic serving [::1]:51438: runtime error: invalid memory address or nil pointer dereference
goroutine 7 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000028318?, 0xc0000cbfe8?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).getErrorTemplate(...)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:86
main.(*Trans).newGetHandler(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:79 +0xc45
main.(*Trans).newProxyTrans(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0006ce1c0}, 0xc000376200)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc000030086?, {0x15657d0?, 0xc0006ce1c0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc00037b020?}, {0x15657d0, 0xc0006ce1c0}, 0xc000376200)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000196090, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:46.130991 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:46.131092 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:46.131146 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:46.131164 ttgethandler.go:15: Path = /
2023/09/16 14:34:46.284774 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:46.288602 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:46.288954 server.go:3217: http: panic serving [::1]:51439: runtime error: invalid memory address or nil pointer dereference
goroutine 8 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000028660?, 0xc000239fe8?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000273900)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000273900)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).getErrorTemplate(...)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:86
main.(*Trans).newGetHandler(0xc000273900)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:79 +0xc45
main.(*Trans).newProxyTrans(0xc000273900)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0006ce9a0}, 0xc000150200)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc00046b6c6?, {0x15657d0?, 0xc0006ce9a0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc0000ae1b0?}, {0x15657d0, 0xc0006ce9a0}, 0xc000150200)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000196120, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:46.289339 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:46.289381 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:46.289430 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:46.289440 ttgethandler.go:15: Path = /
2023/09/16 14:34:46.375803 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:46.379870 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:46.380346 server.go:3217: http: panic serving [::1]:51441: runtime error: invalid memory address or nil pointer dereference
goroutine 54 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc0000289a8?, 0xc000621fe8?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000274c00)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000274c00)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).getErrorTemplate(...)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:86
main.(*Trans).newGetHandler(0xc000274c00)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:79 +0xc45
main.(*Trans).newProxyTrans(0xc000274c00)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0006cf180}, 0xc000698700)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc00022ac86?, {0x15657d0?, 0xc0006cf180?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc000492090?}, {0x15657d0, 0xc0006cf180}, 0xc000698700)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000226000, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:46.381140 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:46.381183 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:46.381218 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:46.381227 ttgethandler.go:15: Path = /
2023/09/16 14:34:46.466527 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:46.469809 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:46.470241 server.go:3217: http: panic serving [::1]:51444: runtime error: invalid memory address or nil pointer dereference
goroutine 28 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000216330?, 0xc00017bfe8?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).getErrorTemplate(...)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:86
main.(*Trans).newGetHandler(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:79 +0xc45
main.(*Trans).newProxyTrans(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0006ce2a0}, 0xc000699300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0005b0b06?, {0x15657d0?, 0xc0006ce2a0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc00066bf50?}, {0x15657d0, 0xc0006ce2a0}, 0xc000699300)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000196090, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:50.001791 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:50.002241 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:50.002298 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:50.002317 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:50.002339 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:50.186712 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:50.196370 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:50.196836 server.go:3217: http: panic serving [::1]:51446: runtime error: invalid memory address or nil pointer dereference
goroutine 31 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000344078?, 0xc0003a9fb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000272600?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000272600)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0006cea80}, 0xc000240500)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0000318c9?, {0x15657d0?, 0xc0006cea80?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc00024bce0?}, {0x15657d0, 0xc0006cea80}, 0xc000240500)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000196360, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:51.489430 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:51.489572 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:51.489658 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:51.489690 ttgethandler.go:15: Path = /
2023/09/16 14:34:51.677102 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:51.683076 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:51.683576 server.go:3217: http: panic serving [::1]:51447: runtime error: invalid memory address or nil pointer dereference
goroutine 46 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000216078?, 0xc000117fe8?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).getErrorTemplate(...)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:86
main.(*Trans).newGetHandler(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:79 +0xc45
main.(*Trans).newProxyTrans(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0006ce1c0}, 0xc000241000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0001b5206?, {0x15657d0?, 0xc0006ce1c0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc0004267e0?}, {0x15657d0, 0xc0006ce1c0}, 0xc000241000)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000196090, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:51.806620 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:51.806766 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:51.806859 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:51.806891 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:51.806910 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:51.892315 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:51.895557 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:51.895847 server.go:3217: http: panic serving [::1]:51448: runtime error: invalid memory address or nil pointer dereference
goroutine 47 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc0002163f0?, 0xc00028ffb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000218000?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc00009c460}, 0xc000240f00)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0002c9f09?, {0x15657d0?, 0xc00009c460?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc000426750?}, {0x15657d0, 0xc00009c460}, 0xc000240f00)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000196120, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:51.896224 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:51.896259 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:51.896290 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:51.896301 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:51.896311 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:51.981236 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:51.984672 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:51.985094 server.go:3217: http: panic serving [::1]:51449: runtime error: invalid memory address or nil pointer dereference
goroutine 65 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000028228?, 0xc0001e5fb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000219300?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc00009ce00}, 0xc00026c000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc000326a09?, {0x15657d0?, 0xc00009ce00?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc000252090?}, {0x15657d0, 0xc00009ce00}, 0xc00026c000)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000256000, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:51.986065 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:51.986108 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:51.986154 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:51.986167 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:51.986178 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:52.072038 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:52.075581 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:52.076014 server.go:3217: http: panic serving [::1]:51450: runtime error: invalid memory address or nil pointer dereference
goroutine 66 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc0000285d0?, 0xc0001e5fb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000270000?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000270000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc00009c380}, 0xc000151300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0001b4b49?, {0x15657d0?, 0xc00009c380?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc000223f80?}, {0x15657d0, 0xc00009c380}, 0xc000151300)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000256090, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:53.107476 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:53.107600 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:53.107668 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:53.107688 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:53.107699 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:53.262577 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:53.267619 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:53.268135 server.go:3217: http: panic serving [::1]:51451: runtime error: invalid memory address or nil pointer dereference
goroutine 69 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc0002160f0?, 0xc000415fb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000218000?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc000318000}, 0xc0001e2000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc000030089?, {0x15657d0?, 0xc000318000?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc0001e0030?}, {0x15657d0, 0xc000318000}, 0xc0001e2000)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000256360, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:58.292814 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:58.292913 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:58.292968 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:58.292987 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:58.293000 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:58.481621 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:58.486989 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:58.487458 server.go:3217: http: panic serving [::1]:51452: runtime error: invalid memory address or nil pointer dereference
goroutine 70 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000028468?, 0xc000117fb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000219300?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0003182a0}, 0xc0002e6500)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0002c8d09?, {0x15657d0?, 0xc0003182a0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc0002f1d70?}, {0x15657d0, 0xc0003182a0}, 0xc0002e6500)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc0002563f0, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:58.488190 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:58.488239 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:58.488288 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:58.488299 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:58.488359 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:58.574681 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:58.580525 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:58.580956 server.go:3217: http: panic serving [::1]:51454: runtime error: invalid memory address or nil pointer dereference
goroutine 81 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000216240?, 0xc0002cffb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc00021a600)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc00021a600)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc00021a600?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc00021a600)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc00021a600)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc000318b60}, 0xc000150200)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0001b5849?, {0x15657d0?, 0xc000318b60?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc00023a0c0?}, {0x15657d0, 0xc000318b60}, 0xc000150200)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000256000, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:34:58.582411 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:34:58.582741 ttproxy.go:138: 	Request Query Params
2023/09/16 14:34:58.582928 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:34:58.582952 ttgethandler.go:15: Path = /spa
2023/09/16 14:34:58.582968 tttmplts.go:23: Using Default SPA template
2023/09/16 14:34:58.668859 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:34:58.675828 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:34:58.676476 server.go:3217: http: panic serving [::1]:51455: runtime error: invalid memory address or nil pointer dereference
goroutine 100 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc0002163c0?, 0xc000169fb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000218000?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000218000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc0003181c0}, 0xc00042d000)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc000302a89?, {0x15657d0?, 0xc0003181c0?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc000163e90?}, {0x15657d0, 0xc0003181c0}, 0xc00042d000)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000256090, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:35:28.705438 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:35:28.705641 ttproxy.go:138: 	Request Query Params
2023/09/16 14:35:28.705773 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:35:28.706062 ttgethandler.go:15: Path = /spa
2023/09/16 14:35:28.706118 tttmplts.go:23: Using Default SPA template
2023/09/16 14:35:28.892991 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:35:28.896497 tttmplts.go:104: Template pdsretrieve_tmplt caused Error template: pdsretrieve_tmplt:214: unexpected EOF
2023/09/16 14:35:28.897325 server.go:3217: http: panic serving [::1]:51459: runtime error: invalid memory address or nil pointer dereference
goroutine 103 [running]:
net/http.(*conn).serve.func1()
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1854 +0xbf
panic({0x1434ca0, 0x17e4e70})
	/Users/IanThomas/sdk/go1.20.5/src/runtime/panic.go:890 +0x263
html/template.(*Template).New(0x14c1682?, {0xc000028228?, 0xc00037bfb0?})
	/Users/IanThomas/sdk/go1.20.5/src/html/template/template.go:305 +0x37
main.(*Trans).cacheTemplates(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:103 +0x1d2
main.(*Trans).setResponseFromTemplate(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:85 +0x45
main.(*Trans).setSpaTemplate(0xc000219300?)
	/Users/IanThomas/go/src/ttxdwuser/main/tttmplts.go:26 +0x9a
main.(*Trans).newGetHandler(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttgethandler.go:44 +0xd58
main.(*Trans).newProxyTrans(0xc000219300)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:73 +0x4d1
main.Handle_HTTP_Request({0x15657d0, 0xc000318a80}, 0xc00047a400)
	/Users/IanThomas/go/src/ttxdwuser/main/ttproxy.go:15 +0xeb
net/http.HandlerFunc.ServeHTTP(0xc0001b4809?, {0x15657d0?, 0xc000318a80?}, 0x1064cee?)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2122 +0x2f
net/http.serverHandler.ServeHTTP({0xc0001d6060?}, {0x15657d0, 0xc000318a80}, 0xc00047a400)
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:2936 +0x316
net/http.(*conn).serve(0xc000256360, {0x15659c8, 0xc0001998f0})
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:1995 +0x612
created by net/http.(*Server).Serve
	/Users/IanThomas/sdk/go1.20.5/src/net/http/server.go:3089 +0x5ed
2023/09/16 14:35:53.016955 ttserver.go:52: ICB Workflow Service stopped
2023/09/16 14:35:54.732841 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/16 14:35:54.733333 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/16 14:35:54.733457 ttdb.go:54: Opened Database
2023/09/16 14:35:55.081083 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/16 14:35:55.147319 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/16 14:35:55.147415 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/16 14:35:55.215543 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/16 14:35:55.319063 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/16 14:35:55.319238 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/16 14:35:55.389212 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/16 14:35:55.526723 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/16 14:35:55.526872 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/16 14:35:55.605802 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/16 14:35:55.767314 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/16 14:35:55.767418 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/16 14:35:55.896741 ttdb.go:379: Persisting Template notification_tmplt
2023/09/16 14:35:56.016418 ttdb.go:385: Persisted Template notification_tmplt
2023/09/16 14:35:56.016567 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/16 14:35:56.139403 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/16 14:35:56.566834 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/16 14:35:56.567039 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/16 14:35:56.686657 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/16 14:35:56.798764 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/16 14:35:56.798919 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/16 14:35:56.981877 ttdb.go:379: Persisting Template react_tmplt
2023/09/16 14:35:57.112880 ttdb.go:385: Persisted Template react_tmplt
2023/09/16 14:35:57.113008 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/16 14:35:57.238334 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/16 14:35:57.318161 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/16 14:35:57.318287 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/16 14:35:57.385732 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/16 14:35:57.453523 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/16 14:35:57.453573 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/16 14:35:57.523457 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/16 14:35:57.628331 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/16 14:35:57.628462 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/16 14:35:57.696387 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/16 14:35:57.799518 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/16 14:35:57.799648 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/16 14:35:57.866823 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/16 14:35:57.940683 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/16 14:35:57.940725 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/16 14:35:58.008131 ttdb.go:379: Persisting Template pds_tmplt
2023/09/16 14:35:58.075685 ttdb.go:385: Persisted Template pds_tmplt
2023/09/16 14:35:58.075745 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/16 14:35:58.143958 ttdb.go:379: Persisting Template error_tmplt
2023/09/16 14:35:58.210403 ttdb.go:385: Persisted Template error_tmplt
2023/09/16 14:35:58.210518 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/16 14:35:58.278550 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/16 14:35:58.345510 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/16 14:35:58.345540 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/16 14:35:58.412610 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/16 14:35:58.483368 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/16 14:35:58.483520 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/16 14:35:58.550792 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/16 14:35:58.621717 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/16 14:35:58.621846 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/16 14:35:58.689125 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/16 14:35:58.768064 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/16 14:35:58.768158 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/16 14:35:58.838022 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/16 14:35:58.914115 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/16 14:35:58.914355 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/16 14:35:58.981518 ttdb.go:379: Persisting Template events_tmplt
2023/09/16 14:35:59.058834 ttdb.go:385: Persisted Template events_tmplt
2023/09/16 14:35:59.058890 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/16 14:35:59.129665 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/16 14:35:59.195810 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/16 14:35:59.195840 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/16 14:35:59.195935 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/16 14:36:07.345571 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:07.345776 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:07.346151 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:36:07.346170 ttgethandler.go:15: Path = /spa
2023/09/16 14:36:07.346183 tttmplts.go:23: Using Default SPA template
2023/09/16 14:36:07.543083 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:36:07.554855 tttmplts.go:87: Processing Template spa2t_tmplt
2023/09/16 14:36:07.557670 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:07.701511 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:07.701617 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:07.701674 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:36:07.701695 ttgethandler.go:15: Path = /beta/spa/consumer/xdws
2023/09/16 14:36:07.702132 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:07.702169 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:07.702188 ttutil.go:140: 	{
  "Name": "event-logo.png"
}
2023/09/16 14:36:07.702196 ttgethandler.go:15: Path = /beta/spa/consumer/static
2023/09/16 14:36:07.702208 ttsysman.go:237: Retrieving event-logo.png
2023/09/16 14:36:07.806406 ttxdwconsumer.go:407: selected 22 Workflows for Pathway  NHS  Version -1
2023/09/16 14:36:07.854863 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:07.879881 ttxdwconsumer.go:213: Setting Workflow States
2023/09/16 14:36:07.881161 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.883598 ttxdwconsumer.go:327: Workflow Started 2023-08-24 19:18:57 +0100 BST Status CLOSED
2023/09/16 14:36:07.883712 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.883709 +0100 BST
2023/09/16 14:36:07.884102 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-24 19:42:42 +0000 UTC
2023/09/16 14:36:07.884128 ttxdwconsumer.go:336: Duration - 0 Days 1 Hrs 23 Mins
2023/09/16 14:36:07.884202 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.884278 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-13 19:18:57 +0100 BST
2023/09/16 14:36:07.884725 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-24 19:42:42 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.884897 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.885195 ttxdwconsumer.go:226: Setting EREF Workflow state for Patient 6072406157
2023/09/16 14:36:07.885497 ttxdwconsumer.go:327: Workflow Started 2023-08-24 19:23:11 +0100 BST Status CLOSED
2023/09/16 14:36:07.885557 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.885556 +0100 BST
2023/09/16 14:36:07.885794 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-24 19:22:58 +0000 UTC
2023/09/16 14:36:07.885805 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 59 Mins
2023/09/16 14:36:07.885858 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.885912 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-26 19:23:11 +0100 BST
2023/09/16 14:36:07.886128 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-24 19:22:58 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.886143 ttxdwconsumer.go:296: Workflow eref6072406157 is CLOSED
2023/09/16 14:36:07.886538 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.886886 ttxdwconsumer.go:327: Workflow Started 2023-08-24 20:42:54 +0100 BST Status CLOSED
2023/09/16 14:36:07.886934 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.886933 +0100 BST
2023/09/16 14:36:07.887275 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-26 15:06:08 +0000 UTC
2023/09/16 14:36:07.887288 ttxdwconsumer.go:336: Duration - 1 Days 19 Hrs 23 Mins
2023/09/16 14:36:07.887342 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.887395 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-13 20:42:54 +0100 BST
2023/09/16 14:36:07.887701 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-26 15:06:08 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.887717 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.887959 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 9999999468
2023/09/16 14:36:07.888315 ttxdwconsumer.go:327: Workflow Started 2023-08-25 10:15:32 +0100 BST Status CLOSED
2023/09/16 14:36:07.888427 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.888425 +0100 BST
2023/09/16 14:36:07.889011 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-25 09:15:38 +0000 UTC
2023/09/16 14:36:07.889030 ttxdwconsumer.go:336: Duration - 6 Secs
2023/09/16 14:36:07.889090 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.889145 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-25 13:15:32 +0100 BST
2023/09/16 14:36:07.889396 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-25 09:15:38 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.889584 ttxdwconsumer.go:296: Workflow radconsult9999999468 is CLOSED
2023/09/16 14:36:07.889784 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 9999999468
2023/09/16 14:36:07.890089 ttxdwconsumer.go:327: Workflow Started 2023-08-25 10:36:31 +0100 BST Status CLOSED
2023/09/16 14:36:07.890137 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.890136 +0100 BST
2023/09/16 14:36:07.890426 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-25 09:36:36 +0000 UTC
2023/09/16 14:36:07.890441 ttxdwconsumer.go:336: Duration - 5 Secs
2023/09/16 14:36:07.890503 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.890567 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-28 10:36:31 +0100 BST
2023/09/16 14:36:07.890822 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-25 09:36:36 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.890844 ttxdwconsumer.go:296: Workflow radconsult9999999468 is CLOSED
2023/09/16 14:36:07.891041 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 9999999468
2023/09/16 14:36:07.891306 ttxdwconsumer.go:327: Workflow Started 2023-08-25 10:57:22 +0100 BST Status CLOSED
2023/09/16 14:36:07.891356 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.891354 +0100 BST
2023/09/16 14:36:07.891574 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-25 09:58:09 +0000 UTC
2023/09/16 14:36:07.891585 ttxdwconsumer.go:336: Duration - 47 Secs
2023/09/16 14:36:07.891637 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.891734 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-28 10:57:22 +0100 BST
2023/09/16 14:36:07.892539 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-25 09:58:09 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.892562 ttxdwconsumer.go:296: Workflow radconsult9999999468 is CLOSED
2023/09/16 14:36:07.894144 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 9999999468
2023/09/16 14:36:07.894477 ttxdwconsumer.go:327: Workflow Started 2023-08-25 11:43:49 +0100 BST Status CLOSED
2023/09/16 14:36:07.894530 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.894529 +0100 BST
2023/09/16 14:36:07.894753 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-25 18:24:45 +0000 UTC
2023/09/16 14:36:07.894763 ttxdwconsumer.go:336: Duration - 0 Days 7 Hrs 40 Mins
2023/09/16 14:36:07.894811 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.894864 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-28 11:43:49 +0100 BST
2023/09/16 14:36:07.895073 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-25 18:24:45 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.895087 ttxdwconsumer.go:296: Workflow radconsult9999999468 is CLOSED
2023/09/16 14:36:07.895257 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 9999999468
2023/09/16 14:36:07.895595 ttxdwconsumer.go:327: Workflow Started 2023-08-25 19:25:01 +0100 BST Status CLOSED
2023/09/16 14:36:07.895643 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.895641 +0100 BST
2023/09/16 14:36:07.895853 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-26 09:01:49 +0100 BST
2023/09/16 14:36:07.895886 ttxdwconsumer.go:336: Duration - 0 Days 13 Hrs 36 Mins
2023/09/16 14:36:07.895948 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.895997 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-25 22:25:01 +0100 BST
2023/09/16 14:36:07.896217 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-26 09:01:49 +0100 BST. Workflow Target Met = false
2023/09/16 14:36:07.896239 ttxdwconsumer.go:296: Workflow radconsult9999999468 is CLOSED
2023/09/16 14:36:07.896649 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.897313 ttxdwconsumer.go:327: Workflow Started 2023-08-29 17:00:58 +0100 BST Status CLOSED
2023/09/16 14:36:07.897385 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.897383 +0100 BST
2023/09/16 14:36:07.897717 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-29 16:03:32 +0000 UTC
2023/09/16 14:36:07.897730 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 2 Mins
2023/09/16 14:36:07.897803 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.897868 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-18 17:00:58 +0100 BST
2023/09/16 14:36:07.897878 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.897899 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.898196 ttxdwconsumer.go:226: Setting PATHALERT Workflow state for Patient 6072406157
2023/09/16 14:36:07.898642 ttxdwconsumer.go:327: Workflow Started 2023-08-29 17:20:32 +0100 BST Status CLOSED
2023/09/16 14:36:07.898706 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.898704 +0100 BST
2023/09/16 14:36:07.899046 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-29 16:23:05 +0000 UTC
2023/09/16 14:36:07.899059 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 2 Mins
2023/09/16 14:36:07.899120 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.899186 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-30 01:20:32 +0100 BST
2023/09/16 14:36:07.899515 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-29 16:23:05 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.899543 ttxdwconsumer.go:296: Workflow pathalert6072406157 is CLOSED
2023/09/16 14:36:07.900078 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.900537 ttxdwconsumer.go:327: Workflow Started 2023-08-30 10:21:36 +0100 BST Status CLOSED
2023/09/16 14:36:07.900585 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.900584 +0100 BST
2023/09/16 14:36:07.900896 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-30 09:36:38 +0000 UTC
2023/09/16 14:36:07.900905 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 15 Mins
2023/09/16 14:36:07.900955 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.901006 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-19 10:21:36 +0100 BST
2023/09/16 14:36:07.901015 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.901027 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.901413 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.901805 ttxdwconsumer.go:327: Workflow Started 2023-08-30 10:39:37 +0100 BST Status CLOSED
2023/09/16 14:36:07.901857 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.901856 +0100 BST
2023/09/16 14:36:07.902168 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-30 11:31:20 +0000 UTC
2023/09/16 14:36:07.902177 ttxdwconsumer.go:336: Duration - 0 Days 1 Hrs 51 Mins
2023/09/16 14:36:07.902238 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.902288 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-19 10:39:37 +0100 BST
2023/09/16 14:36:07.902297 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.902309 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.902475 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 9999999468
2023/09/16 14:36:07.902755 ttxdwconsumer.go:327: Workflow Started 2023-08-30 14:34:22 +0100 BST Status CLOSED
2023/09/16 14:36:07.902804 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.902803 +0100 BST
2023/09/16 14:36:07.903015 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-08-30 13:39:22 +0000 UTC
2023/09/16 14:36:07.903025 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 5 Mins
2023/09/16 14:36:07.903073 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.903133 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-30 17:34:22 +0100 BST
2023/09/16 14:36:07.903383 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-08-30 13:39:22 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.903396 ttxdwconsumer.go:296: Workflow radconsult9999999468 is CLOSED
2023/09/16 14:36:07.903569 ttxdwconsumer.go:226: Setting RADCONSULT Workflow state for Patient 1111111111
2023/09/16 14:36:07.903877 ttxdwconsumer.go:327: Workflow Started 2023-08-30 17:47:08 +0100 BST Status CLOSED
2023/09/16 14:36:07.903949 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.903947 +0100 BST
2023/09/16 14:36:07.904220 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-11 19:22:50 +0000 UTC
2023/09/16 14:36:07.904231 ttxdwconsumer.go:336: Duration - 12 Days 2 Hrs 35 Mins
2023/09/16 14:36:07.904281 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.904385 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-08-30 20:47:08 +0100 BST
2023/09/16 14:36:07.904686 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-09-11 19:22:50 +0000 UTC. Workflow Target Met = false
2023/09/16 14:36:07.904711 ttxdwconsumer.go:296: Workflow radconsult1111111111 is CLOSED
2023/09/16 14:36:07.905094 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.905533 ttxdwconsumer.go:327: Workflow Started 2023-09-03 15:33:30 +0100 BST Status CLOSED
2023/09/16 14:36:07.905582 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.90558 +0100 BST
2023/09/16 14:36:07.905816 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-05 14:42:19 +0100 BST
2023/09/16 14:36:07.905829 ttxdwconsumer.go:336: Duration - 1 Days 23 Hrs 8 Mins
2023/09/16 14:36:07.905870 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.905903 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-23 15:33:30 +0100 BST
2023/09/16 14:36:07.905908 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.905917 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.906107 ttxdwconsumer.go:226: Setting TOC Workflow state for Patient 6072406157
2023/09/16 14:36:07.906317 ttxdwconsumer.go:327: Workflow Started 2023-09-09 09:47:48 +0100 BST Status CLOSED
2023/09/16 14:36:07.906355 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.906351 +0100 BST
2023/09/16 14:36:07.906524 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-09 08:52:24 +0000 UTC
2023/09/16 14:36:07.906531 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 4 Mins
2023/09/16 14:36:07.906558 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.906586 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-09-14 09:47:48 +0100 BST
2023/09/16 14:36:07.906766 ttxdwconsumer.go:358: Workflow Latest Event Time 2023-09-09 08:52:24 +0000 UTC. Workflow Target Met = true
2023/09/16 14:36:07.906774 ttxdwconsumer.go:296: Workflow toc6072406157 is CLOSED
2023/09/16 14:36:07.907001 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.907193 ttxdwconsumer.go:327: Workflow Started 2023-09-11 20:25:32 +0100 BST Status CLOSED
2023/09/16 14:36:07.907220 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.907219 +0100 BST
2023/09/16 14:36:07.907383 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-11 19:52:17 +0000 UTC
2023/09/16 14:36:07.907388 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 26 Mins
2023/09/16 14:36:07.907418 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.907466 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-10-01 20:25:32 +0100 BST
2023/09/16 14:36:07.907470 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.907476 ttxdwconsumer.go:296: Workflow d2a6072406157 is CLOSED
2023/09/16 14:36:07.907706 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 9999999468
2023/09/16 14:36:07.907972 ttxdwconsumer.go:327: Workflow Started 2023-09-11 21:09:53 +0100 BST Status CLOSED
2023/09/16 14:36:07.908018 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.908017 +0100 BST
2023/09/16 14:36:07.908474 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-11 21:43:10 +0000 UTC
2023/09/16 14:36:07.908483 ttxdwconsumer.go:336: Duration - 0 Days 1 Hrs 33 Mins
2023/09/16 14:36:07.908545 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.908588 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-10-01 21:09:53 +0100 BST
2023/09/16 14:36:07.908593 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.908601 ttxdwconsumer.go:296: Workflow d2a9999999468 is CLOSED
2023/09/16 14:36:07.909183 ttxdwconsumer.go:226: Setting D2A Workflow state for Patient 6072406157
2023/09/16 14:36:07.909340 ttxdwconsumer.go:327: Workflow Started 2023-09-12 22:32:28 +0100 BST Status OPEN
2023/09/16 14:36:07.909373 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.909372 +0100 BST
2023/09/16 14:36:07.909380 ttxdwconsumer.go:336: Duration - 3 Days 16 Hrs 3 Mins
2023/09/16 14:36:07.909419 ttxdwconsumer.go:342: Completion time 2023-10-02 22:32:28 +0100 BST
2023/09/16 14:36:07.909425 ttxdwconsumer.go:347: Workflow Time Remaining : 391h56m20.090577s
2023/09/16 14:36:07.909466 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.909500 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-10-02 22:32:28 +0100 BST
2023/09/16 14:36:07.909505 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.909520 ttxdwconsumer.go:286: Workflow d2a6072406157 is OPEN
2023/09/16 14:36:07.909526 ttxdwconsumer.go:381: No Escalate time defined for Workflow
2023/09/16 14:36:07.909888 ttxdwconsumer.go:226: Setting LAC Workflow state for Patient 1111111111
2023/09/16 14:36:07.910184 ttxdwconsumer.go:327: Workflow Started 2023-09-12 23:00:30 +0100 BST Status CLOSED
2023/09/16 14:36:07.910212 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.910211 +0100 BST
2023/09/16 14:36:07.910483 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-12 23:03:05 +0100 BST
2023/09/16 14:36:07.910489 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 2 Mins
2023/09/16 14:36:07.910514 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.910543 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-10-02 23:00:30 +0100 BST
2023/09/16 14:36:07.910547 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.910564 ttxdwconsumer.go:296: Workflow lac1111111111 is CLOSED
2023/09/16 14:36:07.910865 ttxdwconsumer.go:226: Setting LAC Workflow state for Patient 1111111111
2023/09/16 14:36:07.911130 ttxdwconsumer.go:327: Workflow Started 2023-09-13 09:36:29 +0100 BST Status CLOSED
2023/09/16 14:36:07.911162 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.911162 +0100 BST
2023/09/16 14:36:07.911370 ttxdwconsumer.go:333: Workflow is Complete. Latest Event Time was 2023-09-13 09:11:05 +0000 UTC
2023/09/16 14:36:07.911374 ttxdwconsumer.go:336: Duration - 0 Days 0 Hrs 34 Mins
2023/09/16 14:36:07.911398 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.911423 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-10-03 09:36:29 +0100 BST
2023/09/16 14:36:07.911427 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.911439 ttxdwconsumer.go:296: Workflow lac1111111111 is CLOSED
2023/09/16 14:36:07.911750 ttxdwconsumer.go:226: Setting LAC Workflow state for Patient 1111111111
2023/09/16 14:36:07.912016 ttxdwconsumer.go:327: Workflow Started 2023-09-13 10:21:29 +0100 BST Status OPEN
2023/09/16 14:36:07.912041 ttxdwconsumer.go:330: Time Now 2023-09-16 14:36:07.912041 +0100 BST
2023/09/16 14:36:07.912058 ttxdwconsumer.go:336: Duration - 3 Days 4 Hrs 14 Mins
2023/09/16 14:36:07.912084 ttxdwconsumer.go:342: Completion time 2023-10-03 10:21:29 +0100 BST
2023/09/16 14:36:07.912088 ttxdwconsumer.go:347: Workflow Time Remaining : 403h45m21.087912s
2023/09/16 14:36:07.912115 ttxdwconsumer.go:351: Checking if Workflow is Overdue
2023/09/16 14:36:07.912142 ttxdwconsumer.go:354: Workflow Complete By Date is 2023-10-03 10:21:29 +0100 BST
2023/09/16 14:36:07.912147 ttxdwconsumer.go:365: Workflow is not overdue
2023/09/16 14:36:07.912155 ttxdwconsumer.go:286: Workflow lac1111111111 is OPEN
2023/09/16 14:36:07.912192 ttxdwconsumer.go:378: Workflow Start Time 2023-09-13T10:21:29+01:00 Worklow Escalate Time 2023-10-04 10:21:29 +0100 BST Workflow Escaleted = false
2023/09/16 14:36:07.912263 tttmplts.go:87: Processing Template wfstate2t_tmplt
2023/09/16 14:36:08.004723 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:08.035763 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:08.035834 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:08.035885 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:36:08.035902 ttgethandler.go:15: Path = /beta/spa/consumer/pathways
2023/09/16 14:36:08.037576 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:08.037611 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:08.037630 ttutil.go:140: 	{
  "Name": "favicon.ico"
}
2023/09/16 14:36:08.037640 ttgethandler.go:15: Path = /beta/spa/consumer/static
2023/09/16 14:36:08.037649 ttsysman.go:237: Retrieving favicon.ico
2023/09/16 14:36:08.098091 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:08.105041 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:19.529643 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:19.530092 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:19.530224 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical",
  "Nhs": "9000000009",
  "Vers": "-1"
}
2023/09/16 14:36:19.530256 ttgethandler.go:15: Path = /beta/spa/consumer/xdws
2023/09/16 14:36:19.529992 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:19.530927 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:19.530965 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical"
}
2023/09/16 14:36:19.530979 ttgethandler.go:15: Path = /beta/spa/consumer/expressions
2023/09/16 14:36:19.531298 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:19.598073 ttxdwconsumer.go:407: selected 0 Workflows for Pathway  NHS 9000000009 Version -1
2023/09/16 14:36:19.662611 ttxdwconsumer.go:213: Setting Workflow States
2023/09/16 14:36:19.662784 tttmplts.go:87: Processing Template wfstate2t_tmplt
2023/09/16 14:36:19.663124 ttproxy.go:149: Response Status Code 200
2023/09/16 14:36:22.759429 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:36:22.759595 ttproxy.go:138: 	Request Query Params
2023/09/16 14:36:22.759669 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical",
  "Nhs": "9000000009"
}
2023/09/16 14:36:22.759698 ttgethandler.go:15: Path = /beta/spa/consumer/patient
2023/09/16 14:36:22.759779 tttmplts.go:30: PIXm Worker starting
2023/09/16 14:36:22.759763 tttmplts.go:37: CGL Worker starting
2023/09/16 14:36:22.759856 tthttp.go:15: Creating PIXm PDQ - Server URL http://lac-demo-01.tianispirit.co.uk:8081/SpiritPIXFhir/r4/Patient?identifier=2.16.840.1.113883.2.1.4.1%7C9000000009
2023/09/16 14:36:22.761875 tthttp.go:160: Request Headers 
map[Accept:[application/json] X-Api-Key:[FNhb#OhxWiEiMdf+@6085k5Zmt] X-Api-Secret:[9710ea0fb4ffb5d56c2e62c71c30bdfhjsyr56a79d]]
2023/09/16 14:36:22.761895 tthttp.go:160: Request Headers 
map[Content-Type:[application/json]]
2023/09/16 14:36:23.351895 tthttp.go:174: Server Response - Status Code 404 
{"errors":[{"message":"No clients matching nhs number 9000000009","path":"\/"}],"status":404}
2023/09/16 14:36:23.361296 ttutil.go:140: 	{
  "data": {
    "client": {
      "basicDetails": {
        "address": {},
        "name": {}
      },
      "bbvInformation": {},
      "drugTestResults": {
        "results": {}
      },
      "riskInformation": {
        "mentalHealthDomain": {},
        "riskOfHarmToSelfDomain": {},
        "socialDomain": {},
        "substanceMisuseDomain": {}
      },
      "safeguardingInformation": {}
    },
    "keyWorker": {
      "name": {}
    }
  }
}
2023/09/16 14:36:23.361452 tttmplts.go:39: CGL Worker done
2023/09/16 14:36:23.361483 tttmplts.go:40: CGL Worker Status Code 404
2023/09/16 14:36:27.760650 tthttp.go:174: Server Response - Status Code 0 
2023/09/16 14:36:27.761238 tttmplts.go:32: PIXm Worker done
2023/09/16 14:36:27.761290 tttmplts.go:33: PIXm Worker Status Code 408
2023/09/16 14:36:27.761491 tthttp.go:56: Creating PDS Search Request - Server URL https://sandbox.api.service.nhs.uk/personal-demographics/FHIR/R4/Patient/9000000009
2023/09/16 14:36:27.761628 tthttp.go:160: Request Headers 
map[Accept:[*/*] Content-Type:[application/json] X-Request-Id:[c71bbbc2-e4e6-4133-92f0-7996f84cc0bf]]
2023/09/16 14:36:28.581549 tthttp.go:174: Server Response - Status Code 200 
{"resourceType":"Patient","id":"9000000009","identifier":[{"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9000000009","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0","code":"01","display":"Number present and verified"}]}}]}],"meta":{"versionId":"2","security":[{"system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality","code":"U","display":"unrestricted"}]},"name":[{"id":"123","use":"usual","period":{"start":"2020-01-01","end":"2021-12-31"},"given":["Jane"],"family":"Smith","prefix":["Mrs"],"suffix":["MBE"]}],"gender":"female","birthDate":"2010-10-22","multipleBirthInteger":1,"deceasedDateTime":"2010-10-22T00:00:00+00:00","generalPractitioner":[{"id":"254406A3","type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}}],"managingOrganization":{"type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}},"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y23456"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y34567"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus","extension":[{"url":"deathNotificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus","version":"1.0.0","code":"2","display":"Formal - death notice received from Registrar of Deaths"}]}},{"url":"systemEffectiveDate","valueDateTime":"2010-10-22T00:00:00+00:00"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication","extension":[{"url":"language","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage","version":"1.0.0","code":"fr","display":"French"}]}},{"url":"interpreterRequired","valueBoolean":true}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference","extension":[{"url":"PreferredWrittenCommunicationFormat","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat","code":"12","display":"Braille"}]}},{"url":"PreferredContactMethod","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod","code":"1","display":"Letter"}]}},{"url":"PreferredContactTimes","valueString":"Not after 7pm"}]},{"url":"http://hl7.org/fhir/StructureDefinition/patient-birthPlace","valueAddress":{"city":"Manchester","district":"Greater Manchester","country":"GBR"}},{"url":"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration","extension":[{"url":"removalFromRegistrationCode","valueCodeableConcept":{"coding":[{"system":"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode","code":"SCT","display":"Transferred to Scotland"}]}},{"url":"effectiveTime","valuePeriod":{"start":"2020-01-01T00:00:00+00:00","end":"2021-12-31T00:00:00+00:00"}}]}],"telecom":[{"id":"789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"phone","value":"01632960587","use":"home"},{"id":"790","period":{"start":"2019-01-01","end":"2022-12-31"},"system":"email","value":"jane.smith@example.com","use":"home"},{"id":"OC789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"other","value":"01632960587","use":"home","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem","code":"textphone","display":"Minicom (Textphone)"}}]}],"contact":[{"id":"C123","period":{"start":"2020-01-01","end":"2021-12-31"},"relationship":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v2-0131","code":"C","display":"Emergency Contact"}]}],"telecom":[{"system":"phone","value":"01632960587"}]}],"address":[{"id":"456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"home","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]},{"id":"T456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"temp","text":"Student Accommodation","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]}]}
2023/09/16 14:36:28.582854 tttmplts.go:87: Processing Template allpatientSrvs_tmplt
2023/09/16 14:36:28.586219 tttmplts.go:93: template: pdsretrieve_tmplt:199:49: executing "pdsretrieve_tmplt" at <$extext.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:36:28.586389 ttproxy.go:105: template: pdsretrieve_tmplt:199:49: executing "pdsretrieve_tmplt" at <$extext.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:36:28.586430 ttproxy.go:149: Response Status Code 500
2023/09/16 14:36:28.586445 ttproxy.go:151: 
2023/09/16 14:36:28.586455 ttproxy.go:152: Response Headers
2023/09/16 14:36:28.586533 ttutil.go:140: 	{
  "Access-Control-Allow-Origin": "*",
  "Content-Type": "",
  "Server": "Workflow Service"
}
2023/09/16 14:36:28.586552 ttproxy.go:154: ----------------
2023/09/16 14:36:28.586559 ttproxy.go:155: Response
2023/09/16 14:36:28.586566 ttproxy.go:156: ----------------
2023/09/16 14:36:28.586818 ttutil.go:140: 	{
  "Host": "MacBook-Pro-3.lan",
  "Path": "/beta/spa/consumer/patient",
  "Method": "GET",
  "SourceIP": "[::1]:51469",
  "ReqContentType": "",
  "RspContentType": "",
  "ResponseBody": "{\"resourceType\":\"Patient\",\"id\":\"9000000009\",\"identifier\":[{\"system\":\"https://fhir.nhs.uk/Id/nhs-number\",\"value\":\"9000000009\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus\",\"version\":\"1.0.0\",\"code\":\"01\",\"display\":\"Number present and verified\"}]}}]}],\"meta\":{\"versionId\":\"2\",\"security\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\",\"code\":\"U\",\"display\":\"unrestricted\"}]},\"name\":[{\"id\":\"123\",\"use\":\"usual\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"given\":[\"Jane\"],\"family\":\"Smith\",\"prefix\":[\"Mrs\"],\"suffix\":[\"MBE\"]}],\"gender\":\"female\",\"birthDate\":\"2010-10-22\",\"multipleBirthInteger\":1,\"deceasedDateTime\":\"2010-10-22T00:00:00+00:00\",\"generalPractitioner\":[{\"id\":\"254406A3\",\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}}],\"managingOrganization\":{\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}},\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y23456\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y34567\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",\"extension\":[{\"url\":\"deathNotificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\"version\":\"1.0.0\",\"code\":\"2\",\"display\":\"Formal - death notice received from Registrar of Deaths\"}]}},{\"url\":\"systemEffectiveDate\",\"valueDateTime\":\"2010-10-22T00:00:00+00:00\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication\",\"extension\":[{\"url\":\"language\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage\",\"version\":\"1.0.0\",\"code\":\"fr\",\"display\":\"French\"}]}},{\"url\":\"interpreterRequired\",\"valueBoolean\":true}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference\",\"extension\":[{\"url\":\"PreferredWrittenCommunicationFormat\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",\"code\":\"12\",\"display\":\"Braille\"}]}},{\"url\":\"PreferredContactMethod\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod\",\"code\":\"1\",\"display\":\"Letter\"}]}},{\"url\":\"PreferredContactTimes\",\"valueString\":\"Not after 7pm\"}]},{\"url\":\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace\",\"valueAddress\":{\"city\":\"Manchester\",\"district\":\"Greater Manchester\",\"country\":\"GBR\"}},{\"url\":\"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration\",\"extension\":[{\"url\":\"removalFromRegistrationCode\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode\",\"code\":\"SCT\",\"display\":\"Transferred to Scotland\"}]}},{\"url\":\"effectiveTime\",\"valuePeriod\":{\"start\":\"2020-01-01T00:00:00+00:00\",\"end\":\"2021-12-31T00:00:00+00:00\"}}]}],\"telecom\":[{\"id\":\"789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"phone\",\"value\":\"01632960587\",\"use\":\"home\"},{\"id\":\"790\",\"period\":{\"start\":\"2019-01-01\",\"end\":\"2022-12-31\"},\"system\":\"email\",\"value\":\"jane.smith@example.com\",\"use\":\"home\"},{\"id\":\"OC789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"other\",\"value\":\"01632960587\",\"use\":\"home\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem\",\"code\":\"textphone\",\"display\":\"Minicom (Textphone)\"}}]}],\"contact\":[{\"id\":\"C123\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"relationship\":[{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0131\",\"code\":\"C\",\"display\":\"Emergency Contact\"}]}],\"telecom\":[{\"system\":\"phone\",\"value\":\"01632960587\"}]}],\"address\":[{\"id\":\"456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"home\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]},{\"id\":\"T456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"temp\",\"text\":\"Student Accommodation\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]}]}",
  "StatusCode": 500,
  "IsBase64": false,
  "Timeout": 0
}
2023/09/16 14:36:28.586849 ttproxy.go:158: -------------
2023/09/16 14:36:28.586860 ttproxy.go:160: Error template: pdsretrieve_tmplt:199:49: executing "pdsretrieve_tmplt" at <$extext.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:36:28.586867 ttproxy.go:161: -------------
2023/09/16 14:47:57.803206 ttserver.go:52: ICB Workflow Service stopped
2023/09/16 14:47:59.511084 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/16 14:47:59.511584 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/16 14:47:59.511721 ttdb.go:54: Opened Database
2023/09/16 14:47:59.711621 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/16 14:47:59.773825 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/16 14:47:59.773879 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/16 14:47:59.836886 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/16 14:47:59.934704 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/16 14:47:59.934795 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/16 14:48:00.256082 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/16 14:48:00.336449 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/16 14:48:00.336565 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/16 14:48:00.399704 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/16 14:48:00.463221 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/16 14:48:00.463359 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/16 14:48:00.528708 ttdb.go:379: Persisting Template notification_tmplt
2023/09/16 14:48:00.591702 ttdb.go:385: Persisted Template notification_tmplt
2023/09/16 14:48:00.591851 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/16 14:48:00.654121 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/16 14:48:00.775245 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/16 14:48:00.775316 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/16 14:48:00.838637 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/16 14:48:00.904237 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/16 14:48:00.904448 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/16 14:48:00.969744 ttdb.go:379: Persisting Template react_tmplt
2023/09/16 14:48:01.033804 ttdb.go:385: Persisted Template react_tmplt
2023/09/16 14:48:01.033959 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/16 14:48:01.099594 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/16 14:48:01.168168 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/16 14:48:01.168337 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/16 14:48:01.232009 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/16 14:48:01.303330 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/16 14:48:01.303362 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/16 14:48:01.366960 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/16 14:48:01.442503 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/16 14:48:01.442539 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/16 14:48:01.504315 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/16 14:48:01.585490 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/16 14:48:01.585699 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/16 14:48:01.650919 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/16 14:48:01.722461 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/16 14:48:01.722648 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/16 14:48:01.787246 ttdb.go:379: Persisting Template pds_tmplt
2023/09/16 14:48:01.850315 ttdb.go:385: Persisted Template pds_tmplt
2023/09/16 14:48:01.850408 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/16 14:48:01.913602 ttdb.go:379: Persisting Template error_tmplt
2023/09/16 14:48:01.977733 ttdb.go:385: Persisted Template error_tmplt
2023/09/16 14:48:01.977886 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/16 14:48:02.041809 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/16 14:48:02.104863 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/16 14:48:02.104996 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/16 14:48:02.168568 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/16 14:48:02.235368 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/16 14:48:02.235505 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/16 14:48:02.299296 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/16 14:48:02.372224 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/16 14:48:02.372372 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/16 14:48:02.436611 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/16 14:48:02.505197 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/16 14:48:02.505331 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/16 14:48:02.568022 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/16 14:48:02.638700 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/16 14:48:02.638841 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/16 14:48:02.701802 ttdb.go:379: Persisting Template events_tmplt
2023/09/16 14:48:02.772288 ttdb.go:385: Persisted Template events_tmplt
2023/09/16 14:48:02.772451 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/16 14:48:02.835339 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/16 14:48:02.899152 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/16 14:48:02.899306 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/16 14:48:02.899616 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/16 14:48:06.256059 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:48:06.256256 ttproxy.go:138: 	Request Query Params
2023/09/16 14:48:06.256601 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical",
  "Nhs": "9000000009"
}
2023/09/16 14:48:06.256646 ttgethandler.go:15: Path = /beta/spa/consumer/patient
2023/09/16 14:48:06.256719 tttmplts.go:37: CGL Worker starting
2023/09/16 14:48:06.256734 tttmplts.go:30: PIXm Worker starting
2023/09/16 14:48:06.257594 tthttp.go:15: Creating PIXm PDQ - Server URL http://lac-demo-01.tianispirit.co.uk:8081/SpiritPIXFhir/r4/Patient?identifier=2.16.840.1.113883.2.1.4.1%7C9000000009
2023/09/16 14:48:06.258415 tthttp.go:160: Request Headers 
map[Content-Type:[application/json]]
2023/09/16 14:48:06.258433 tthttp.go:160: Request Headers 
map[Accept:[application/json] X-Api-Key:[FNhb#OhxWiEiMdf+@6085k5Zmt] X-Api-Secret:[9710ea0fb4ffb5d56c2e62c71c30bdfhjsyr56a79d]]
2023/09/16 14:48:06.424730 tthttp.go:174: Server Response - Status Code 404 
{"errors":[{"message":"No clients matching nhs number 9000000009","path":"\/"}],"status":404}
2023/09/16 14:48:06.427846 ttutil.go:140: 	{
  "data": {
    "client": {
      "basicDetails": {
        "address": {},
        "name": {}
      },
      "bbvInformation": {},
      "drugTestResults": {
        "results": {}
      },
      "riskInformation": {
        "mentalHealthDomain": {},
        "riskOfHarmToSelfDomain": {},
        "socialDomain": {},
        "substanceMisuseDomain": {}
      },
      "safeguardingInformation": {}
    },
    "keyWorker": {
      "name": {}
    }
  }
}
2023/09/16 14:48:06.427996 tttmplts.go:39: CGL Worker done
2023/09/16 14:48:06.428032 tttmplts.go:40: CGL Worker Status Code 404
2023/09/16 14:48:11.256523 tthttp.go:174: Server Response - Status Code 0 
2023/09/16 14:48:11.257355 tttmplts.go:32: PIXm Worker done
2023/09/16 14:48:11.257533 tttmplts.go:33: PIXm Worker Status Code 408
2023/09/16 14:48:11.257820 tthttp.go:56: Creating PDS Search Request - Server URL https://sandbox.api.service.nhs.uk/personal-demographics/FHIR/R4/Patient/9000000009
2023/09/16 14:48:11.258004 tthttp.go:160: Request Headers 
map[Accept:[*/*] Content-Type:[application/json] X-Request-Id:[1deef6cf-7bdd-487f-8eb6-ceeaed8c1fb5]]
2023/09/16 14:48:11.422207 tthttp.go:174: Server Response - Status Code 200 
{"resourceType":"Patient","id":"9000000009","identifier":[{"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9000000009","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0","code":"01","display":"Number present and verified"}]}}]}],"meta":{"versionId":"2","security":[{"system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality","code":"U","display":"unrestricted"}]},"name":[{"id":"123","use":"usual","period":{"start":"2020-01-01","end":"2021-12-31"},"given":["Jane"],"family":"Smith","prefix":["Mrs"],"suffix":["MBE"]}],"gender":"female","birthDate":"2010-10-22","multipleBirthInteger":1,"deceasedDateTime":"2010-10-22T00:00:00+00:00","generalPractitioner":[{"id":"254406A3","type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}}],"managingOrganization":{"type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}},"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y23456"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y34567"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus","extension":[{"url":"deathNotificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus","version":"1.0.0","code":"2","display":"Formal - death notice received from Registrar of Deaths"}]}},{"url":"systemEffectiveDate","valueDateTime":"2010-10-22T00:00:00+00:00"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication","extension":[{"url":"language","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage","version":"1.0.0","code":"fr","display":"French"}]}},{"url":"interpreterRequired","valueBoolean":true}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference","extension":[{"url":"PreferredWrittenCommunicationFormat","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat","code":"12","display":"Braille"}]}},{"url":"PreferredContactMethod","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod","code":"1","display":"Letter"}]}},{"url":"PreferredContactTimes","valueString":"Not after 7pm"}]},{"url":"http://hl7.org/fhir/StructureDefinition/patient-birthPlace","valueAddress":{"city":"Manchester","district":"Greater Manchester","country":"GBR"}},{"url":"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration","extension":[{"url":"removalFromRegistrationCode","valueCodeableConcept":{"coding":[{"system":"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode","code":"SCT","display":"Transferred to Scotland"}]}},{"url":"effectiveTime","valuePeriod":{"start":"2020-01-01T00:00:00+00:00","end":"2021-12-31T00:00:00+00:00"}}]}],"telecom":[{"id":"789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"phone","value":"01632960587","use":"home"},{"id":"790","period":{"start":"2019-01-01","end":"2022-12-31"},"system":"email","value":"jane.smith@example.com","use":"home"},{"id":"OC789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"other","value":"01632960587","use":"home","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem","code":"textphone","display":"Minicom (Textphone)"}}]}],"contact":[{"id":"C123","period":{"start":"2020-01-01","end":"2021-12-31"},"relationship":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v2-0131","code":"C","display":"Emergency Contact"}]}],"telecom":[{"system":"phone","value":"01632960587"}]}],"address":[{"id":"456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"home","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]},{"id":"T456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"temp","text":"Student Accommodation","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]}]}
2023/09/16 14:48:11.612541 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:48:11.618276 tttmplts.go:87: Processing Template allpatientSrvs_tmplt
2023/09/16 14:48:11.686888 tttmplts.go:93: template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:48:11.687121 ttproxy.go:105: template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:48:11.687197 ttproxy.go:149: Response Status Code 500
2023/09/16 14:48:11.687216 ttproxy.go:151: 
2023/09/16 14:48:11.687228 ttproxy.go:152: Response Headers
2023/09/16 14:48:11.687341 ttutil.go:140: 	{
  "Access-Control-Allow-Origin": "*",
  "Content-Type": "",
  "Server": "Workflow Service"
}
2023/09/16 14:48:11.687360 ttproxy.go:154: ----------------
2023/09/16 14:48:11.687370 ttproxy.go:155: Response
2023/09/16 14:48:11.687379 ttproxy.go:156: ----------------
2023/09/16 14:48:11.687729 ttutil.go:140: 	{
  "Host": "MacBook-Pro-3.lan",
  "Path": "/beta/spa/consumer/patient",
  "Method": "GET",
  "SourceIP": "[::1]:51664",
  "ReqContentType": "",
  "RspContentType": "",
  "ResponseBody": "{\"resourceType\":\"Patient\",\"id\":\"9000000009\",\"identifier\":[{\"system\":\"https://fhir.nhs.uk/Id/nhs-number\",\"value\":\"9000000009\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus\",\"version\":\"1.0.0\",\"code\":\"01\",\"display\":\"Number present and verified\"}]}}]}],\"meta\":{\"versionId\":\"2\",\"security\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\",\"code\":\"U\",\"display\":\"unrestricted\"}]},\"name\":[{\"id\":\"123\",\"use\":\"usual\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"given\":[\"Jane\"],\"family\":\"Smith\",\"prefix\":[\"Mrs\"],\"suffix\":[\"MBE\"]}],\"gender\":\"female\",\"birthDate\":\"2010-10-22\",\"multipleBirthInteger\":1,\"deceasedDateTime\":\"2010-10-22T00:00:00+00:00\",\"generalPractitioner\":[{\"id\":\"254406A3\",\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}}],\"managingOrganization\":{\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}},\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y23456\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y34567\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",\"extension\":[{\"url\":\"deathNotificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\"version\":\"1.0.0\",\"code\":\"2\",\"display\":\"Formal - death notice received from Registrar of Deaths\"}]}},{\"url\":\"systemEffectiveDate\",\"valueDateTime\":\"2010-10-22T00:00:00+00:00\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication\",\"extension\":[{\"url\":\"language\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage\",\"version\":\"1.0.0\",\"code\":\"fr\",\"display\":\"French\"}]}},{\"url\":\"interpreterRequired\",\"valueBoolean\":true}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference\",\"extension\":[{\"url\":\"PreferredWrittenCommunicationFormat\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",\"code\":\"12\",\"display\":\"Braille\"}]}},{\"url\":\"PreferredContactMethod\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod\",\"code\":\"1\",\"display\":\"Letter\"}]}},{\"url\":\"PreferredContactTimes\",\"valueString\":\"Not after 7pm\"}]},{\"url\":\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace\",\"valueAddress\":{\"city\":\"Manchester\",\"district\":\"Greater Manchester\",\"country\":\"GBR\"}},{\"url\":\"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration\",\"extension\":[{\"url\":\"removalFromRegistrationCode\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode\",\"code\":\"SCT\",\"display\":\"Transferred to Scotland\"}]}},{\"url\":\"effectiveTime\",\"valuePeriod\":{\"start\":\"2020-01-01T00:00:00+00:00\",\"end\":\"2021-12-31T00:00:00+00:00\"}}]}],\"telecom\":[{\"id\":\"789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"phone\",\"value\":\"01632960587\",\"use\":\"home\"},{\"id\":\"790\",\"period\":{\"start\":\"2019-01-01\",\"end\":\"2022-12-31\"},\"system\":\"email\",\"value\":\"jane.smith@example.com\",\"use\":\"home\"},{\"id\":\"OC789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"other\",\"value\":\"01632960587\",\"use\":\"home\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem\",\"code\":\"textphone\",\"display\":\"Minicom (Textphone)\"}}]}],\"contact\":[{\"id\":\"C123\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"relationship\":[{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0131\",\"code\":\"C\",\"display\":\"Emergency Contact\"}]}],\"telecom\":[{\"system\":\"phone\",\"value\":\"01632960587\"}]}],\"address\":[{\"id\":\"456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"home\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]},{\"id\":\"T456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"temp\",\"text\":\"Student Accommodation\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]}]}",
  "StatusCode": 500,
  "IsBase64": false,
  "Timeout": 0
}
2023/09/16 14:48:11.687750 ttproxy.go:158: -------------
2023/09/16 14:48:11.687760 ttproxy.go:160: Error template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:48:11.687769 ttproxy.go:161: -------------
2023/09/16 14:53:43.956745 ttserver.go:52: ICB Workflow Service stopped
2023/09/16 14:53:46.006406 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/16 14:53:46.006890 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/16 14:53:46.007006 ttdb.go:54: Opened Database
2023/09/16 14:53:46.189681 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/16 14:53:46.254089 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/16 14:53:46.254133 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/16 14:53:46.317213 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/16 14:53:46.417115 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/16 14:53:46.417264 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/16 14:53:46.481416 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/16 14:53:46.549259 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/16 14:53:46.549343 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/16 14:53:46.612438 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/16 14:53:46.676314 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/16 14:53:46.676448 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/16 14:53:46.740377 ttdb.go:379: Persisting Template notification_tmplt
2023/09/16 14:53:46.803155 ttdb.go:385: Persisted Template notification_tmplt
2023/09/16 14:53:46.803308 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/16 14:53:46.869169 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/16 14:53:46.988248 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/16 14:53:46.988358 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/16 14:53:47.052213 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/16 14:53:47.121178 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/16 14:53:47.121295 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/16 14:53:47.185967 ttdb.go:379: Persisting Template react_tmplt
2023/09/16 14:53:47.249727 ttdb.go:385: Persisted Template react_tmplt
2023/09/16 14:53:47.249851 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/16 14:53:47.313938 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/16 14:53:47.382725 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/16 14:53:47.382811 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/16 14:53:47.446751 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/16 14:53:47.514683 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/16 14:53:47.514824 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/16 14:53:47.578316 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/16 14:53:47.653716 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/16 14:53:47.653740 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/16 14:53:47.717733 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/16 14:53:47.796249 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/16 14:53:47.796288 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/16 14:53:47.861349 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/16 14:53:47.929966 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/16 14:53:47.930015 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/16 14:53:47.997544 ttdb.go:379: Persisting Template pds_tmplt
2023/09/16 14:53:48.061076 ttdb.go:385: Persisted Template pds_tmplt
2023/09/16 14:53:48.061152 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/16 14:53:48.126650 ttdb.go:379: Persisting Template error_tmplt
2023/09/16 14:53:48.190492 ttdb.go:385: Persisted Template error_tmplt
2023/09/16 14:53:48.190625 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/16 14:53:48.254972 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/16 14:53:48.319191 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/16 14:53:48.319509 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/16 14:53:48.385593 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/16 14:53:48.455182 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/16 14:53:48.455370 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/16 14:53:48.521010 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/16 14:53:48.590459 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/16 14:53:48.590668 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/16 14:53:48.656871 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/16 14:53:48.727318 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/16 14:53:48.727548 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/16 14:53:48.793188 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/16 14:53:48.864393 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/16 14:53:48.864594 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/16 14:53:48.931348 ttdb.go:379: Persisting Template events_tmplt
2023/09/16 14:53:48.998845 ttdb.go:385: Persisted Template events_tmplt
2023/09/16 14:53:48.999035 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/16 14:53:49.094481 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/16 14:53:49.202764 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/16 14:53:49.202825 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/16 14:53:49.202933 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/16 14:53:52.598537 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:53:52.598680 ttproxy.go:138: 	Request Query Params
2023/09/16 14:53:52.599005 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical",
  "Nhs": "9000000009"
}
2023/09/16 14:53:52.599045 ttgethandler.go:15: Path = /beta/spa/consumer/patient
2023/09/16 14:53:52.599087 tttmplts.go:37: CGL Worker starting
2023/09/16 14:53:52.599092 tttmplts.go:30: PIXm Worker starting
2023/09/16 14:53:52.599602 tthttp.go:15: Creating PIXm PDQ - Server URL http://lac-demo-01.tianispirit.co.uk:8081/SpiritPIXFhir/r4/Patient?identifier=2.16.840.1.113883.2.1.4.1%7C9000000009
2023/09/16 14:53:52.600766 tthttp.go:160: Request Headers 
map[Content-Type:[application/json]]
2023/09/16 14:53:52.600843 tthttp.go:160: Request Headers 
map[Accept:[application/json] X-Api-Key:[FNhb#OhxWiEiMdf+@6085k5Zmt] X-Api-Secret:[9710ea0fb4ffb5d56c2e62c71c30bdfhjsyr56a79d]]
2023/09/16 14:53:52.789233 tthttp.go:174: Server Response - Status Code 404 
{"errors":[{"message":"No clients matching nhs number 9000000009","path":"\/"}],"status":404}
2023/09/16 14:53:52.792206 ttutil.go:140: 	{
  "data": {
    "client": {
      "basicDetails": {
        "address": {},
        "name": {}
      },
      "bbvInformation": {},
      "drugTestResults": {
        "results": {}
      },
      "riskInformation": {
        "mentalHealthDomain": {},
        "riskOfHarmToSelfDomain": {},
        "socialDomain": {},
        "substanceMisuseDomain": {}
      },
      "safeguardingInformation": {}
    },
    "keyWorker": {
      "name": {}
    }
  }
}
2023/09/16 14:53:52.792309 tttmplts.go:39: CGL Worker done
2023/09/16 14:53:52.792336 tttmplts.go:40: CGL Worker Status Code 404
2023/09/16 14:53:57.600027 tthttp.go:174: Server Response - Status Code 0 
2023/09/16 14:53:57.600434 tttmplts.go:32: PIXm Worker done
2023/09/16 14:53:57.600482 tttmplts.go:33: PIXm Worker Status Code 408
2023/09/16 14:53:57.600622 tthttp.go:56: Creating PDS Search Request - Server URL https://sandbox.api.service.nhs.uk/personal-demographics/FHIR/R4/Patient/9000000009
2023/09/16 14:53:57.600743 tthttp.go:160: Request Headers 
map[Accept:[*/*] Content-Type:[application/json] X-Request-Id:[963801bf-84c9-4c0e-900c-742b7b5ba24a]]
2023/09/16 14:53:57.809225 tthttp.go:174: Server Response - Status Code 200 
{"resourceType":"Patient","id":"9000000009","identifier":[{"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9000000009","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0","code":"01","display":"Number present and verified"}]}}]}],"meta":{"versionId":"2","security":[{"system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality","code":"U","display":"unrestricted"}]},"name":[{"id":"123","use":"usual","period":{"start":"2020-01-01","end":"2021-12-31"},"given":["Jane"],"family":"Smith","prefix":["Mrs"],"suffix":["MBE"]}],"gender":"female","birthDate":"2010-10-22","multipleBirthInteger":1,"deceasedDateTime":"2010-10-22T00:00:00+00:00","generalPractitioner":[{"id":"254406A3","type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}}],"managingOrganization":{"type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}},"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y23456"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y34567"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus","extension":[{"url":"deathNotificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus","version":"1.0.0","code":"2","display":"Formal - death notice received from Registrar of Deaths"}]}},{"url":"systemEffectiveDate","valueDateTime":"2010-10-22T00:00:00+00:00"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication","extension":[{"url":"language","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage","version":"1.0.0","code":"fr","display":"French"}]}},{"url":"interpreterRequired","valueBoolean":true}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference","extension":[{"url":"PreferredWrittenCommunicationFormat","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat","code":"12","display":"Braille"}]}},{"url":"PreferredContactMethod","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod","code":"1","display":"Letter"}]}},{"url":"PreferredContactTimes","valueString":"Not after 7pm"}]},{"url":"http://hl7.org/fhir/StructureDefinition/patient-birthPlace","valueAddress":{"city":"Manchester","district":"Greater Manchester","country":"GBR"}},{"url":"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration","extension":[{"url":"removalFromRegistrationCode","valueCodeableConcept":{"coding":[{"system":"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode","code":"SCT","display":"Transferred to Scotland"}]}},{"url":"effectiveTime","valuePeriod":{"start":"2020-01-01T00:00:00+00:00","end":"2021-12-31T00:00:00+00:00"}}]}],"telecom":[{"id":"789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"phone","value":"01632960587","use":"home"},{"id":"790","period":{"start":"2019-01-01","end":"2022-12-31"},"system":"email","value":"jane.smith@example.com","use":"home"},{"id":"OC789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"other","value":"01632960587","use":"home","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem","code":"textphone","display":"Minicom (Textphone)"}}]}],"contact":[{"id":"C123","period":{"start":"2020-01-01","end":"2021-12-31"},"relationship":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v2-0131","code":"C","display":"Emergency Contact"}]}],"telecom":[{"system":"phone","value":"01632960587"}]}],"address":[{"id":"456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"home","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]},{"id":"T456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"temp","text":"Student Accommodation","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]}]}
2023/09/16 14:53:58.003138 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:53:58.009073 tttmplts.go:87: Processing Template allpatientSrvs_tmplt
2023/09/16 14:53:58.077294 tttmplts.go:93: template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:53:58.077591 ttproxy.go:105: template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:53:58.077650 ttproxy.go:149: Response Status Code 500
2023/09/16 14:53:58.077668 ttproxy.go:151: 
2023/09/16 14:53:58.077680 ttproxy.go:152: Response Headers
2023/09/16 14:53:58.077793 ttutil.go:140: 	{
  "Access-Control-Allow-Origin": "*",
  "Content-Type": "",
  "Server": "Workflow Service"
}
2023/09/16 14:53:58.077813 ttproxy.go:154: ----------------
2023/09/16 14:53:58.077822 ttproxy.go:155: Response
2023/09/16 14:53:58.077830 ttproxy.go:156: ----------------
2023/09/16 14:53:58.078187 ttutil.go:140: 	{
  "Host": "MacBook-Pro-3.lan",
  "Path": "/beta/spa/consumer/patient",
  "Method": "GET",
  "SourceIP": "[::1]:51770",
  "ReqContentType": "",
  "RspContentType": "",
  "ResponseBody": "{\"resourceType\":\"Patient\",\"id\":\"9000000009\",\"identifier\":[{\"system\":\"https://fhir.nhs.uk/Id/nhs-number\",\"value\":\"9000000009\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus\",\"version\":\"1.0.0\",\"code\":\"01\",\"display\":\"Number present and verified\"}]}}]}],\"meta\":{\"versionId\":\"2\",\"security\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\",\"code\":\"U\",\"display\":\"unrestricted\"}]},\"name\":[{\"id\":\"123\",\"use\":\"usual\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"given\":[\"Jane\"],\"family\":\"Smith\",\"prefix\":[\"Mrs\"],\"suffix\":[\"MBE\"]}],\"gender\":\"female\",\"birthDate\":\"2010-10-22\",\"multipleBirthInteger\":1,\"deceasedDateTime\":\"2010-10-22T00:00:00+00:00\",\"generalPractitioner\":[{\"id\":\"254406A3\",\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}}],\"managingOrganization\":{\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}},\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y23456\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y34567\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",\"extension\":[{\"url\":\"deathNotificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\"version\":\"1.0.0\",\"code\":\"2\",\"display\":\"Formal - death notice received from Registrar of Deaths\"}]}},{\"url\":\"systemEffectiveDate\",\"valueDateTime\":\"2010-10-22T00:00:00+00:00\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication\",\"extension\":[{\"url\":\"language\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage\",\"version\":\"1.0.0\",\"code\":\"fr\",\"display\":\"French\"}]}},{\"url\":\"interpreterRequired\",\"valueBoolean\":true}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference\",\"extension\":[{\"url\":\"PreferredWrittenCommunicationFormat\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",\"code\":\"12\",\"display\":\"Braille\"}]}},{\"url\":\"PreferredContactMethod\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod\",\"code\":\"1\",\"display\":\"Letter\"}]}},{\"url\":\"PreferredContactTimes\",\"valueString\":\"Not after 7pm\"}]},{\"url\":\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace\",\"valueAddress\":{\"city\":\"Manchester\",\"district\":\"Greater Manchester\",\"country\":\"GBR\"}},{\"url\":\"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration\",\"extension\":[{\"url\":\"removalFromRegistrationCode\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode\",\"code\":\"SCT\",\"display\":\"Transferred to Scotland\"}]}},{\"url\":\"effectiveTime\",\"valuePeriod\":{\"start\":\"2020-01-01T00:00:00+00:00\",\"end\":\"2021-12-31T00:00:00+00:00\"}}]}],\"telecom\":[{\"id\":\"789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"phone\",\"value\":\"01632960587\",\"use\":\"home\"},{\"id\":\"790\",\"period\":{\"start\":\"2019-01-01\",\"end\":\"2022-12-31\"},\"system\":\"email\",\"value\":\"jane.smith@example.com\",\"use\":\"home\"},{\"id\":\"OC789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"other\",\"value\":\"01632960587\",\"use\":\"home\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem\",\"code\":\"textphone\",\"display\":\"Minicom (Textphone)\"}}]}],\"contact\":[{\"id\":\"C123\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"relationship\":[{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0131\",\"code\":\"C\",\"display\":\"Emergency Contact\"}]}],\"telecom\":[{\"system\":\"phone\",\"value\":\"01632960587\"}]}],\"address\":[{\"id\":\"456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"home\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]},{\"id\":\"T456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"temp\",\"text\":\"Student Accommodation\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]}]}",
  "StatusCode": 500,
  "IsBase64": false,
  "Timeout": 0
}
2023/09/16 14:53:58.078230 ttproxy.go:158: -------------
2023/09/16 14:53:58.078242 ttproxy.go:160: Error template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:53:58.078255 ttproxy.go:161: -------------
2023/09/16 14:57:46.882377 ttserver.go:52: ICB Workflow Service stopped
2023/09/16 14:57:48.625476 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/16 14:57:48.625975 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/16 14:57:48.626112 ttdb.go:54: Opened Database
2023/09/16 14:57:48.810447 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/16 14:57:48.882057 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/16 14:57:48.882125 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/16 14:57:48.947609 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/16 14:57:49.049389 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/16 14:57:49.049514 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/16 14:57:49.169172 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/16 14:57:49.332940 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/16 14:57:49.333090 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/16 14:57:49.473440 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/16 14:57:49.567933 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/16 14:57:49.568036 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/16 14:57:49.722834 ttdb.go:379: Persisting Template notification_tmplt
2023/09/16 14:57:49.911222 ttdb.go:385: Persisted Template notification_tmplt
2023/09/16 14:57:49.911378 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/16 14:57:50.046773 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/16 14:57:50.219168 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/16 14:57:50.219326 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/16 14:57:50.289230 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/16 14:57:50.360228 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/16 14:57:50.360379 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/16 14:57:50.428607 ttdb.go:379: Persisting Template react_tmplt
2023/09/16 14:57:50.497526 ttdb.go:385: Persisted Template react_tmplt
2023/09/16 14:57:50.497567 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/16 14:57:50.568553 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/16 14:57:50.637409 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/16 14:57:50.637511 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/16 14:57:50.703601 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/16 14:57:50.772401 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/16 14:57:50.772537 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/16 14:57:50.838521 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/16 14:57:50.917138 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/16 14:57:50.917253 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/16 14:57:50.984722 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/16 14:57:51.068158 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/16 14:57:51.068283 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/16 14:57:51.133903 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/16 14:57:51.206440 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/16 14:57:51.206499 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/16 14:57:51.273209 ttdb.go:379: Persisting Template pds_tmplt
2023/09/16 14:57:51.339630 ttdb.go:385: Persisted Template pds_tmplt
2023/09/16 14:57:51.339759 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/16 14:57:51.406120 ttdb.go:379: Persisting Template error_tmplt
2023/09/16 14:57:51.473079 ttdb.go:385: Persisted Template error_tmplt
2023/09/16 14:57:51.473210 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/16 14:57:51.540068 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/16 14:57:51.606565 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/16 14:57:51.606649 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/16 14:57:51.675156 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/16 14:57:51.745767 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/16 14:57:51.745890 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/16 14:57:51.813015 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/16 14:57:51.884592 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/16 14:57:51.884734 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/16 14:57:51.952247 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/16 14:57:52.026489 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/16 14:57:52.026594 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/16 14:57:52.092500 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/16 14:57:52.165846 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/16 14:57:52.165977 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/16 14:57:52.233511 ttdb.go:379: Persisting Template events_tmplt
2023/09/16 14:57:52.305112 ttdb.go:385: Persisted Template events_tmplt
2023/09/16 14:57:52.305236 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/16 14:57:52.375034 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/16 14:57:52.443407 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/16 14:57:52.443538 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/16 14:57:52.443815 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/16 14:57:55.336060 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:57:55.336205 ttproxy.go:138: 	Request Query Params
2023/09/16 14:57:55.336560 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical",
  "Nhs": "9000000009"
}
2023/09/16 14:57:55.336600 ttgethandler.go:15: Path = /beta/spa/consumer/patient
2023/09/16 14:57:55.336670 tttmplts.go:37: CGL Worker starting
2023/09/16 14:57:55.336693 tttmplts.go:30: PIXm Worker starting
2023/09/16 14:57:55.337080 tthttp.go:15: Creating PIXm PDQ - Server URL http://lac-demo-01.tianispirit.co.uk:8081/SpiritPIXFhir/r4/Patient?identifier=2.16.840.1.113883.2.1.4.1%7C9000000009
2023/09/16 14:57:55.338497 tthttp.go:160: Request Headers 
map[Content-Type:[application/json]]
2023/09/16 14:57:55.338516 tthttp.go:160: Request Headers 
map[Accept:[application/json] X-Api-Key:[FNhb#OhxWiEiMdf+@6085k5Zmt] X-Api-Secret:[9710ea0fb4ffb5d56c2e62c71c30bdfhjsyr56a79d]]
2023/09/16 14:57:55.516365 tthttp.go:174: Server Response - Status Code 404 
{"errors":[{"message":"No clients matching nhs number 9000000009","path":"\/"}],"status":404}
2023/09/16 14:57:55.519944 ttutil.go:140: 	{
  "data": {
    "client": {
      "basicDetails": {
        "address": {},
        "name": {}
      },
      "bbvInformation": {},
      "drugTestResults": {
        "results": {}
      },
      "riskInformation": {
        "mentalHealthDomain": {},
        "riskOfHarmToSelfDomain": {},
        "socialDomain": {},
        "substanceMisuseDomain": {}
      },
      "safeguardingInformation": {}
    },
    "keyWorker": {
      "name": {}
    }
  }
}
2023/09/16 14:57:55.520155 tttmplts.go:39: CGL Worker done
2023/09/16 14:57:55.520180 tttmplts.go:40: CGL Worker Status Code 404
2023/09/16 14:58:00.339041 tthttp.go:174: Server Response - Status Code 0 
2023/09/16 14:58:00.339418 tttmplts.go:32: PIXm Worker done
2023/09/16 14:58:00.339471 tttmplts.go:33: PIXm Worker Status Code 408
2023/09/16 14:58:00.339651 tthttp.go:56: Creating PDS Search Request - Server URL https://sandbox.api.service.nhs.uk/personal-demographics/FHIR/R4/Patient/9000000009
2023/09/16 14:58:00.339838 tthttp.go:160: Request Headers 
map[Accept:[*/*] Content-Type:[application/json] X-Request-Id:[20c46fe0-c9ee-4344-b9b0-d0689a280e6c]]
2023/09/16 14:58:01.437363 tthttp.go:174: Server Response - Status Code 200 
{"resourceType":"Patient","id":"9000000009","identifier":[{"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9000000009","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0","code":"01","display":"Number present and verified"}]}}]}],"meta":{"versionId":"2","security":[{"system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality","code":"U","display":"unrestricted"}]},"name":[{"id":"123","use":"usual","period":{"start":"2020-01-01","end":"2021-12-31"},"given":["Jane"],"family":"Smith","prefix":["Mrs"],"suffix":["MBE"]}],"gender":"female","birthDate":"2010-10-22","multipleBirthInteger":1,"deceasedDateTime":"2010-10-22T00:00:00+00:00","generalPractitioner":[{"id":"254406A3","type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}}],"managingOrganization":{"type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}},"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y23456"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y34567"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus","extension":[{"url":"deathNotificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus","version":"1.0.0","code":"2","display":"Formal - death notice received from Registrar of Deaths"}]}},{"url":"systemEffectiveDate","valueDateTime":"2010-10-22T00:00:00+00:00"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication","extension":[{"url":"language","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage","version":"1.0.0","code":"fr","display":"French"}]}},{"url":"interpreterRequired","valueBoolean":true}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference","extension":[{"url":"PreferredWrittenCommunicationFormat","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat","code":"12","display":"Braille"}]}},{"url":"PreferredContactMethod","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod","code":"1","display":"Letter"}]}},{"url":"PreferredContactTimes","valueString":"Not after 7pm"}]},{"url":"http://hl7.org/fhir/StructureDefinition/patient-birthPlace","valueAddress":{"city":"Manchester","district":"Greater Manchester","country":"GBR"}},{"url":"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration","extension":[{"url":"removalFromRegistrationCode","valueCodeableConcept":{"coding":[{"system":"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode","code":"SCT","display":"Transferred to Scotland"}]}},{"url":"effectiveTime","valuePeriod":{"start":"2020-01-01T00:00:00+00:00","end":"2021-12-31T00:00:00+00:00"}}]}],"telecom":[{"id":"789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"phone","value":"01632960587","use":"home"},{"id":"790","period":{"start":"2019-01-01","end":"2022-12-31"},"system":"email","value":"jane.smith@example.com","use":"home"},{"id":"OC789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"other","value":"01632960587","use":"home","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem","code":"textphone","display":"Minicom (Textphone)"}}]}],"contact":[{"id":"C123","period":{"start":"2020-01-01","end":"2021-12-31"},"relationship":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v2-0131","code":"C","display":"Emergency Contact"}]}],"telecom":[{"system":"phone","value":"01632960587"}]}],"address":[{"id":"456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"home","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]},{"id":"T456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"temp","text":"Student Accommodation","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]}]}
2023/09/16 14:58:01.797840 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:58:01.803866 tttmplts.go:87: Processing Template allpatientSrvs_tmplt
2023/09/16 14:58:01.943621 tttmplts.go:93: template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:58:01.943851 ttproxy.go:105: template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:58:01.943902 ttproxy.go:149: Response Status Code 500
2023/09/16 14:58:01.943916 ttproxy.go:151: 
2023/09/16 14:58:01.943932 ttproxy.go:152: Response Headers
2023/09/16 14:58:01.944082 ttutil.go:140: 	{
  "Access-Control-Allow-Origin": "*",
  "Content-Type": "",
  "Server": "Workflow Service"
}
2023/09/16 14:58:01.944111 ttproxy.go:154: ----------------
2023/09/16 14:58:01.944128 ttproxy.go:155: Response
2023/09/16 14:58:01.944145 ttproxy.go:156: ----------------
2023/09/16 14:58:01.944719 ttutil.go:140: 	{
  "Host": "MacBook-Pro-3.lan",
  "Path": "/beta/spa/consumer/patient",
  "Method": "GET",
  "SourceIP": "[::1]:51846",
  "ReqContentType": "",
  "RspContentType": "",
  "ResponseBody": "{\"resourceType\":\"Patient\",\"id\":\"9000000009\",\"identifier\":[{\"system\":\"https://fhir.nhs.uk/Id/nhs-number\",\"value\":\"9000000009\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus\",\"version\":\"1.0.0\",\"code\":\"01\",\"display\":\"Number present and verified\"}]}}]}],\"meta\":{\"versionId\":\"2\",\"security\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\",\"code\":\"U\",\"display\":\"unrestricted\"}]},\"name\":[{\"id\":\"123\",\"use\":\"usual\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"given\":[\"Jane\"],\"family\":\"Smith\",\"prefix\":[\"Mrs\"],\"suffix\":[\"MBE\"]}],\"gender\":\"female\",\"birthDate\":\"2010-10-22\",\"multipleBirthInteger\":1,\"deceasedDateTime\":\"2010-10-22T00:00:00+00:00\",\"generalPractitioner\":[{\"id\":\"254406A3\",\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}}],\"managingOrganization\":{\"type\":\"Organization\",\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"}}},\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y12345\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y23456\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier\",\"valueReference\":{\"identifier\":{\"system\":\"https://fhir.nhs.uk/Id/ods-organization-code\",\"value\":\"Y34567\"}}},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",\"extension\":[{\"url\":\"deathNotificationStatus\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\"version\":\"1.0.0\",\"code\":\"2\",\"display\":\"Formal - death notice received from Registrar of Deaths\"}]}},{\"url\":\"systemEffectiveDate\",\"valueDateTime\":\"2010-10-22T00:00:00+00:00\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication\",\"extension\":[{\"url\":\"language\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage\",\"version\":\"1.0.0\",\"code\":\"fr\",\"display\":\"French\"}]}},{\"url\":\"interpreterRequired\",\"valueBoolean\":true}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference\",\"extension\":[{\"url\":\"PreferredWrittenCommunicationFormat\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",\"code\":\"12\",\"display\":\"Braille\"}]}},{\"url\":\"PreferredContactMethod\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod\",\"code\":\"1\",\"display\":\"Letter\"}]}},{\"url\":\"PreferredContactTimes\",\"valueString\":\"Not after 7pm\"}]},{\"url\":\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace\",\"valueAddress\":{\"city\":\"Manchester\",\"district\":\"Greater Manchester\",\"country\":\"GBR\"}},{\"url\":\"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration\",\"extension\":[{\"url\":\"removalFromRegistrationCode\",\"valueCodeableConcept\":{\"coding\":[{\"system\":\"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode\",\"code\":\"SCT\",\"display\":\"Transferred to Scotland\"}]}},{\"url\":\"effectiveTime\",\"valuePeriod\":{\"start\":\"2020-01-01T00:00:00+00:00\",\"end\":\"2021-12-31T00:00:00+00:00\"}}]}],\"telecom\":[{\"id\":\"789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"phone\",\"value\":\"01632960587\",\"use\":\"home\"},{\"id\":\"790\",\"period\":{\"start\":\"2019-01-01\",\"end\":\"2022-12-31\"},\"system\":\"email\",\"value\":\"jane.smith@example.com\",\"use\":\"home\"},{\"id\":\"OC789\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"system\":\"other\",\"value\":\"01632960587\",\"use\":\"home\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem\",\"code\":\"textphone\",\"display\":\"Minicom (Textphone)\"}}]}],\"contact\":[{\"id\":\"C123\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"relationship\":[{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0131\",\"code\":\"C\",\"display\":\"Emergency Contact\"}]}],\"telecom\":[{\"system\":\"phone\",\"value\":\"01632960587\"}]}],\"address\":[{\"id\":\"456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"home\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]},{\"id\":\"T456\",\"period\":{\"start\":\"2020-01-01\",\"end\":\"2021-12-31\"},\"use\":\"temp\",\"text\":\"Student Accommodation\",\"line\":[\"1 Trevelyan Square\",\"Boar Lane\",\"City Centre\",\"Leeds\",\"West Yorkshire\"],\"postalCode\":\"LS1 6AE\",\"extension\":[{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"PAF\"}},{\"url\":\"value\",\"valueString\":\"12345678\"}]},{\"url\":\"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey\",\"extension\":[{\"url\":\"type\",\"valueCoding\":{\"system\":\"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType\",\"code\":\"UPRN\"}},{\"url\":\"value\",\"valueString\":\"123456789012\"}]}]}]}",
  "StatusCode": 500,
  "IsBase64": false,
  "Timeout": 0
}
2023/09/16 14:58:01.944776 ttproxy.go:158: -------------
2023/09/16 14:58:01.944790 ttproxy.go:160: Error template: pdsretrieve_tmplt:199:42: executing "pdsretrieve_tmplt" at <.ValueBoolean>: can't evaluate field ValueBoolean in type struct { URL string "json:\"url,omitempty\""; ValueCodeableConcept struct { Coding []struct { System string "json:\"system,omitempty\""; Version string "json:\"version,omitempty\""; Code string "json:\"code,omitempty\""; Display string "json:\"display,omitempty\"" } "json:\"coding,omitempty\"" } "json:\"valueCodeableConcept,omitempty\""; ValueDateTime time.Time "json:\"valueDateTime,omitempty\"" }
2023/09/16 14:58:01.944799 ttproxy.go:161: -------------
2023/09/16 14:58:55.661700 ttserver.go:52: ICB Workflow Service stopped
2023/09/16 14:58:57.472676 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/16 14:58:57.473137 ttdb.go:51: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/16 14:58:57.473271 ttdb.go:54: Opened Database
2023/09/16 14:58:57.661500 ttdb.go:379: Persisting Template dsubcancel_tmplt
2023/09/16 14:58:57.727192 ttdb.go:385: Persisted Template dsubcancel_tmplt
2023/09/16 14:58:57.727253 ttdb.go:366: Persisted Template dsubcancel_tmplt.xml
2023/09/16 14:58:57.792412 ttdb.go:379: Persisting Template cgl_tmplt
2023/09/16 14:58:57.894508 ttdb.go:385: Persisted Template cgl_tmplt
2023/09/16 14:58:57.894652 ttdb.go:366: Persisted Template cgl_tmplt.html
2023/09/16 14:58:57.959074 ttdb.go:379: Persisting Template pdssearch_tmplt
2023/09/16 14:58:58.037253 ttdb.go:385: Persisted Template pdssearch_tmplt
2023/09/16 14:58:58.037410 ttdb.go:366: Persisted Template pdssearch_tmplt.html
2023/09/16 14:58:58.103845 ttdb.go:379: Persisting Template dsubsubscribe_tmplt
2023/09/16 14:58:58.170814 ttdb.go:385: Persisted Template dsubsubscribe_tmplt
2023/09/16 14:58:58.170981 ttdb.go:366: Persisted Template dsubsubscribe_tmplt.xml
2023/09/16 14:58:58.236113 ttdb.go:379: Persisting Template notification_tmplt
2023/09/16 14:58:58.302938 ttdb.go:385: Persisted Template notification_tmplt
2023/09/16 14:58:58.303096 ttdb.go:366: Persisted Template notification_tmplt.txt
2023/09/16 14:58:58.368845 ttdb.go:379: Persisting Template wfstate2t_tmplt
2023/09/16 14:58:58.499434 ttdb.go:385: Persisted Template wfstate2t_tmplt
2023/09/16 14:58:58.499665 ttdb.go:366: Persisted Template wfstate2t_tmplt.html
2023/09/16 14:58:58.569664 ttdb.go:379: Persisting Template publishfile2t_tmplt
2023/09/16 14:58:58.637053 ttdb.go:385: Persisted Template publishfile2t_tmplt
2023/09/16 14:58:58.637245 ttdb.go:366: Persisted Template publishfile2t_tmplt.html
2023/09/16 14:58:58.704900 ttdb.go:379: Persisting Template react_tmplt
2023/09/16 14:58:58.770979 ttdb.go:385: Persisted Template react_tmplt
2023/09/16 14:58:58.771175 ttdb.go:366: Persisted Template react_tmplt.html
2023/09/16 14:58:58.838187 ttdb.go:379: Persisting Template pdsretrieve_tmplt
2023/09/16 14:58:58.909858 ttdb.go:385: Persisted Template pdsretrieve_tmplt
2023/09/16 14:58:58.910090 ttdb.go:366: Persisted Template pdsretrieve_tmplt.html
2023/09/16 14:58:58.976899 ttdb.go:379: Persisting Template allpatientSrvs_tmplt
2023/09/16 14:58:59.043092 ttdb.go:385: Persisted Template allpatientSrvs_tmplt
2023/09/16 14:58:59.043145 ttdb.go:366: Persisted Template allpatientSrvs_tmplt.html
2023/09/16 14:58:59.108496 ttdb.go:379: Persisting Template spa2t_tmplt
2023/09/16 14:58:59.186257 ttdb.go:385: Persisted Template spa2t_tmplt
2023/09/16 14:58:59.186385 ttdb.go:366: Persisted Template spa2t_tmplt.html
2023/09/16 14:58:59.251743 ttdb.go:379: Persisting Template xdw2t_tmplt
2023/09/16 14:58:59.334039 ttdb.go:385: Persisted Template xdw2t_tmplt
2023/09/16 14:58:59.334176 ttdb.go:366: Persisted Template xdw2t_tmplt.html
2023/09/16 14:58:59.399480 ttdb.go:379: Persisting Template spaheader2t_tmplt
2023/09/16 14:58:59.471334 ttdb.go:385: Persisted Template spaheader2t_tmplt
2023/09/16 14:58:59.471486 ttdb.go:366: Persisted Template spaheader2t_tmplt.html
2023/09/16 14:58:59.540692 ttdb.go:379: Persisting Template pds_tmplt
2023/09/16 14:58:59.611265 ttdb.go:385: Persisted Template pds_tmplt
2023/09/16 14:58:59.611372 ttdb.go:366: Persisted Template pds_tmplt.html
2023/09/16 14:58:59.676896 ttdb.go:379: Persisting Template error_tmplt
2023/09/16 14:58:59.741929 ttdb.go:385: Persisted Template error_tmplt
2023/09/16 14:58:59.742076 ttdb.go:366: Persisted Template error_tmplt.html
2023/09/16 14:58:59.807098 ttdb.go:379: Persisting Template dsuback_tmplt
2023/09/16 14:58:59.872612 ttdb.go:385: Persisted Template dsuback_tmplt
2023/09/16 14:58:59.872748 ttdb.go:366: Persisted Template dsuback_tmplt.xml
2023/09/16 14:58:59.938645 ttdb.go:379: Persisting Template pixm_tmplt
2023/09/16 14:59:00.135300 ttdb.go:385: Persisted Template pixm_tmplt
2023/09/16 14:59:00.135488 ttdb.go:366: Persisted Template pixm_tmplt.html
2023/09/16 14:59:00.221911 ttdb.go:379: Persisting Template subscriptions2t_tmplt
2023/09/16 14:59:00.292778 ttdb.go:385: Persisted Template subscriptions2t_tmplt
2023/09/16 14:59:00.292914 ttdb.go:366: Persisted Template subscriptions2t_tmplt.html
2023/09/16 14:59:00.363493 ttdb.go:379: Persisting Template codemaps2t_tmplt
2023/09/16 14:59:00.432325 ttdb.go:385: Persisted Template codemaps2t_tmplt
2023/09/16 14:59:00.432482 ttdb.go:366: Persisted Template codemaps2t_tmplt.html
2023/09/16 14:59:00.498886 ttdb.go:379: Persisting Template mhdpublish_tmplt
2023/09/16 14:59:00.570685 ttdb.go:385: Persisted Template mhdpublish_tmplt
2023/09/16 14:59:00.570807 ttdb.go:366: Persisted Template mhdpublish_tmplt.json
2023/09/16 14:59:00.638315 ttdb.go:379: Persisting Template events_tmplt
2023/09/16 14:59:00.709809 ttdb.go:385: Persisted Template events_tmplt
2023/09/16 14:59:00.709916 ttdb.go:366: Persisted Template events_tmplt.html
2023/09/16 14:59:00.776132 ttdb.go:379: Persisting Template uploadfile2t_tmplt
2023/09/16 14:59:00.845384 ttdb.go:385: Persisted Template uploadfile2t_tmplt
2023/09/16 14:59:00.845545 ttdb.go:366: Persisted Template uploadfile2t_tmplt.html
2023/09/16 14:59:00.845836 ttserver.go:40: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/16 14:59:04.569059 ttgethandler.go:10: Processing new GET Request
2023/09/16 14:59:04.569167 ttproxy.go:138: 	Request Query Params
2023/09/16 14:59:04.569406 ttutil.go:140: 	{
  "User": "ian.thomas",
  "Org": "tiani-spirit",
  "Role": "clinical",
  "Nhs": "9000000009"
}
2023/09/16 14:59:04.569431 ttgethandler.go:15: Path = /beta/spa/consumer/patient
2023/09/16 14:59:04.569457 tttmplts.go:37: CGL Worker starting
2023/09/16 14:59:04.569463 tttmplts.go:30: PIXm Worker starting
2023/09/16 14:59:04.569902 tthttp.go:15: Creating PIXm PDQ - Server URL http://lac-demo-01.tianispirit.co.uk:8081/SpiritPIXFhir/r4/Patient?identifier=2.16.840.1.113883.2.1.4.1%7C9000000009
2023/09/16 14:59:04.571052 tthttp.go:160: Request Headers 
map[Content-Type:[application/json]]
2023/09/16 14:59:04.571119 tthttp.go:160: Request Headers 
map[Accept:[application/json] X-Api-Key:[FNhb#OhxWiEiMdf+@6085k5Zmt] X-Api-Secret:[9710ea0fb4ffb5d56c2e62c71c30bdfhjsyr56a79d]]
2023/09/16 14:59:04.724174 tthttp.go:174: Server Response - Status Code 404 
{"errors":[{"message":"No clients matching nhs number 9000000009","path":"\/"}],"status":404}
2023/09/16 14:59:04.727018 ttutil.go:140: 	{
  "data": {
    "client": {
      "basicDetails": {
        "address": {},
        "name": {}
      },
      "bbvInformation": {},
      "drugTestResults": {
        "results": {}
      },
      "riskInformation": {
        "mentalHealthDomain": {},
        "riskOfHarmToSelfDomain": {},
        "socialDomain": {},
        "substanceMisuseDomain": {}
      },
      "safeguardingInformation": {}
    },
    "keyWorker": {
      "name": {}
    }
  }
}
2023/09/16 14:59:04.727121 tttmplts.go:39: CGL Worker done
2023/09/16 14:59:04.727146 tttmplts.go:40: CGL Worker Status Code 404
2023/09/16 14:59:09.571275 tthttp.go:174: Server Response - Status Code 0 
2023/09/16 14:59:09.571724 tttmplts.go:32: PIXm Worker done
2023/09/16 14:59:09.571794 tttmplts.go:33: PIXm Worker Status Code 408
2023/09/16 14:59:09.572004 tthttp.go:56: Creating PDS Search Request - Server URL https://sandbox.api.service.nhs.uk/personal-demographics/FHIR/R4/Patient/9000000009
2023/09/16 14:59:09.572196 tthttp.go:160: Request Headers 
map[Accept:[*/*] Content-Type:[application/json] X-Request-Id:[e2e4928b-b5c1-4f96-99c7-49f1d5a6cc84]]
2023/09/16 14:59:09.758302 tthttp.go:174: Server Response - Status Code 200 
{"resourceType":"Patient","id":"9000000009","identifier":[{"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9000000009","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0","code":"01","display":"Number present and verified"}]}}]}],"meta":{"versionId":"2","security":[{"system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality","code":"U","display":"unrestricted"}]},"name":[{"id":"123","use":"usual","period":{"start":"2020-01-01","end":"2021-12-31"},"given":["Jane"],"family":"Smith","prefix":["Mrs"],"suffix":["MBE"]}],"gender":"female","birthDate":"2010-10-22","multipleBirthInteger":1,"deceasedDateTime":"2010-10-22T00:00:00+00:00","generalPractitioner":[{"id":"254406A3","type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}}],"managingOrganization":{"type":"Organization","identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345","period":{"start":"2020-01-01","end":"2021-12-31"}}},"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NominatedPharmacy","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y12345"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-PreferredDispenserOrganization","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y23456"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier","valueReference":{"identifier":{"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"Y34567"}}},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus","extension":[{"url":"deathNotificationStatus","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus","version":"1.0.0","code":"2","display":"Formal - death notice received from Registrar of Deaths"}]}},{"url":"systemEffectiveDate","valueDateTime":"2010-10-22T00:00:00+00:00"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication","extension":[{"url":"language","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage","version":"1.0.0","code":"fr","display":"French"}]}},{"url":"interpreterRequired","valueBoolean":true}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-ContactPreference","extension":[{"url":"PreferredWrittenCommunicationFormat","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredWrittenCommunicationFormat","code":"12","display":"Braille"}]}},{"url":"PreferredContactMethod","valueCodeableConcept":{"coding":[{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-PreferredContactMethod","code":"1","display":"Letter"}]}},{"url":"PreferredContactTimes","valueString":"Not after 7pm"}]},{"url":"http://hl7.org/fhir/StructureDefinition/patient-birthPlace","valueAddress":{"city":"Manchester","district":"Greater Manchester","country":"GBR"}},{"url":"https://fhir.nhs.uk/StructureDefinition/Extension-PDS-RemovalFromRegistration","extension":[{"url":"removalFromRegistrationCode","valueCodeableConcept":{"coding":[{"system":"https://fhir.nhs.uk/CodeSystem/PDS-RemovalReasonExitCode","code":"SCT","display":"Transferred to Scotland"}]}},{"url":"effectiveTime","valuePeriod":{"start":"2020-01-01T00:00:00+00:00","end":"2021-12-31T00:00:00+00:00"}}]}],"telecom":[{"id":"789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"phone","value":"01632960587","use":"home"},{"id":"790","period":{"start":"2019-01-01","end":"2022-12-31"},"system":"email","value":"jane.smith@example.com","use":"home"},{"id":"OC789","period":{"start":"2020-01-01","end":"2021-12-31"},"system":"other","value":"01632960587","use":"home","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-OtherContactSystem","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-OtherContactSystem","code":"textphone","display":"Minicom (Textphone)"}}]}],"contact":[{"id":"C123","period":{"start":"2020-01-01","end":"2021-12-31"},"relationship":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v2-0131","code":"C","display":"Emergency Contact"}]}],"telecom":[{"system":"phone","value":"01632960587"}]}],"address":[{"id":"456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"home","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]},{"id":"T456","period":{"start":"2020-01-01","end":"2021-12-31"},"use":"temp","text":"Student Accommodation","line":["1 Trevelyan Square","Boar Lane","City Centre","Leeds","West Yorkshire"],"postalCode":"LS1 6AE","extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"PAF"}},{"url":"value","valueString":"12345678"}]},{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey","extension":[{"url":"type","valueCoding":{"system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType","code":"UPRN"}},{"url":"value","valueString":"123456789012"}]}]}]}
2023/09/16 14:59:09.950700 tttmplts.go:100: Caching 24 Templates
2023/09/16 14:59:09.956258 tttmplts.go:87: Processing Template allpatientSrvs_tmplt
2023/09/16 14:59:10.025117 ttproxy.go:149: Response Status Code 200
2023/09/16 15:02:56.335698 ttserver.go:52: ICB Workflow Service stopped
