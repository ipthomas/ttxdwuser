2023/09/05 17:22:27.457010 ttutil.go:133: -----------------------------------------------------------------------------------
2023/09/05 17:22:27.457362 ttdb.go:50: Opening DB Connection to mysql instance
User: root
Host: tuk.coil1nnpqdlr.eu-west-1.rds.amazonaws.com
Port: :3306
Name: tuk
Connect Timeout 2s
Read Timeout 5s
2023/09/05 17:22:27.457474 ttdb.go:53: Opened Database
2023/09/05 17:22:27.457486 ttserver.go:38: Starting ICB Workflow Service. Service Endpoint http://MacBook-Pro-3.lan:8080/
2023/09/05 17:22:36.555263 ttgethandler.go:11: Processing new GET Request
2023/09/05 17:22:36.557091 ttproxy.go:138: 	Request Query Params
2023/09/05 17:22:36.557629 ttutil.go:140: 	{
  "User": "system",
  "Org": "2tsolutions",
  "Role": "clinical"
}
2023/09/05 17:22:36.557679 ttgethandler.go:16: Path = /beta/spa/consumer/definitions
2023/09/05 17:22:36.558858 ttsysman.go:40: Registering toc_def.json
2023/09/05 17:22:36.565041 ttsysman.go:62: Marshalled toc_def XDW Definition
2023/09/05 17:22:36.565117 ttsysman.go:64: Processing toc_def
2023/09/05 17:22:36.565187 ttsysman.go:74: Checking Task 1 TOC_Request output TOC1_Request Transfer
2023/09/05 17:22:36.565221 ttsysman.go:67: Processing Task 2 Task Name TOC_Claimed Input Part Name TOC1_Request Transfer
2023/09/05 17:22:36.565243 ttsysman.go:74: Checking Task 2 TOC_Claimed output TOC2_Claimed
2023/09/05 17:22:36.565264 ttsysman.go:67: Processing Task 3 Task Name TOC_Scheduled Input Part Name TOC2_Claimed
2023/09/05 17:22:36.565285 ttsysman.go:74: Checking Task 3 TOC_Scheduled output TOC3_Scheduled
2023/09/05 17:22:36.565305 ttsysman.go:67: Processing Task 4 Task Name TOC_Completed Input Part Name TOC3_Scheduled
2023/09/05 17:22:36.565323 ttsysman.go:74: Checking Task 4 TOC_Completed output TOC4_Completed
2023/09/05 17:22:36.565456 ttsysman.go:146: Persisting toc_def
2023/09/05 17:22:36.896112 ttsysman.go:159: Persisted toc_def XDW Definition
2023/09/05 17:22:36.897271 ttsysman.go:40: Registering radconsult_meta.json
2023/09/05 17:22:36.897606 ttsysman.go:146: Persisting radconsult_meta
2023/09/05 17:22:37.030234 ttsysman.go:159: Persisted radconsult_meta XDW Definition
2023/09/05 17:22:37.031111 ttsysman.go:40: Registering d2a_def.json
2023/09/05 17:22:37.031528 ttsysman.go:62: Marshalled d2a_def XDW Definition
2023/09/05 17:22:37.031576 ttsysman.go:64: Processing d2a_def
2023/09/05 17:22:37.031605 ttsysman.go:74: Checking Task 1 D2A_Identified output D2A1^^TypeCode_EPUT_2018
2023/09/05 17:22:37.031646 ttsysman.go:77: Task 1 D2A_Identified output D2A1^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.031676 ttsysman.go:67: Processing Task 2 Task Name Assessment_Created Input Part Name D2A1^^TypeCode_EPUT_2018
2023/09/05 17:22:37.031702 ttsysman.go:70: Task 2 Task Name Assessment_Created Input Part D2A1^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.031727 ttsysman.go:74: Checking Task 2 Assessment_Created output D2A2^^TypeCode_EPUT_2018
2023/09/05 17:22:37.031753 ttsysman.go:77: Task 2 Assessment_Created output D2A2^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.031779 ttsysman.go:67: Processing Task 3 Task Name Assessment Accepted Input Part Name D2A2^^TypeCode_EPUT_2018
2023/09/05 17:22:37.031804 ttsysman.go:70: Task 3 Task Name Assessment Accepted Input Part D2A2^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.031828 ttsysman.go:74: Checking Task 3 Assessment Accepted output D2A3^^TypeCode_EPUT_2018
2023/09/05 17:22:37.031854 ttsysman.go:77: Task 3 Assessment Accepted output D2A3^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.031880 ttsysman.go:74: Checking Task 3 Assessment Accepted output D2A4^^TypeCode_EPUT_2018
2023/09/05 17:22:37.031907 ttsysman.go:77: Task 3 Assessment Accepted output D2A4^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.031978 ttsysman.go:67: Processing Task 4 Task Name Patient_Discharged Input Part Name D2A3^^TypeCode_EPUT_2018
2023/09/05 17:22:37.032063 ttsysman.go:70: Task 4 Task Name Patient_Discharged Input Part D2A3^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.032085 ttsysman.go:74: Checking Task 4 Patient_Discharged output D2A5^^TypeCode_EPUT_2018
2023/09/05 17:22:37.032105 ttsysman.go:77: Task 4 Patient_Discharged output D2A5^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.032128 ttsysman.go:74: Checking Task 5 Assessment Withdrawn output D2A6^^TypeCode_EPUT_2018
2023/09/05 17:22:37.032148 ttsysman.go:77: Task 5 Assessment Withdrawn output D2A6^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.033274 ttsysman.go:86: Creating 6 DSUB Broker Subscriptions for Document Type Codes [D2A5^^TypeCode_EPUT_2018 D2A6^^TypeCode_EPUT_2018 D2A1^^TypeCode_EPUT_2018 D2A2^^TypeCode_EPUT_2018 D2A3^^TypeCode_EPUT_2018 D2A4^^TypeCode_EPUT_2018]
2023/09/05 17:22:37.097242 ttsubs.go:58: Sending Subscribe Request for TypeCode D2A5^^TypeCode_EPUT_2018 to DSUB Broker http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2023/09/05 17:22:37.285990 tttmplts.go:78: Caching 20 Templates
2023/09/05 17:22:37.298311 tthttp.go:103: Request Headers 
map[Content-Type:[application/xml]]
2023/09/05 17:22:37.298420 tthttp.go:104: Request Body 

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xmlns:s='http://www.w3.org/2001/XMLSchema'
    xmlns:wsa='http://www.w3.org/2005/08/addressing'>
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:3ef3f074-ddf4-4071-ac41-36d97110265e</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand='true'>
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2'
            xmlns:a='http://www.w3.org/2005/08/addressing'
            xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0'
            xmlns:wsa='http://www.w3.org/2005/08/addressing'>
            <wsnt:ConsumerReference>
                <wsa:Address>https://fwa7l2kp71.execute-api.eu-west-1.amazonaws.com/beta/dsubconsumer</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression>
                <rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'>
                    <rim:Slot name=''>
                        <rim:ValueList>
                            <rim:Value>('D2A5^^TypeCode_EPUT_2018')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>
            </wsnt:Filter>
        </wsnt:Subscribe>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
2023/09/05 17:22:37.417933 tthttp.go:120: Server Response - Status Code 200 
<html><head><title>Tiani-Spirit 'XdsDsubBroker'</title></head><body><h1>Tiani-Spirit Web Service page for SUSI service 'SpiritXDSDsub/SpiritXDSDsub/XdsDsubBroker/'</h1><table width='100%' border='1'><tr><td>Endpoint</td><td>Information</td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}NotificationProducer-Subscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationUnSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}SubscriptionManager-UnSubscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr></table></body></html>
2023/09/05 17:22:37.418650 ttsysman.go:146: Persisting d2a_def
2023/09/05 17:22:37.561341 ttsysman.go:159: Persisted d2a_def XDW Definition
2023/09/05 17:22:37.561867 ttsysman.go:40: Registering lac_def.json
2023/09/05 17:22:37.562330 ttsysman.go:62: Marshalled lac_def XDW Definition
2023/09/05 17:22:37.562371 ttsysman.go:64: Processing lac_def
2023/09/05 17:22:37.562393 ttsysman.go:74: Checking Task 1 LAC_Identified output LAC1^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562409 ttsysman.go:77: Task 1 LAC_Identified output LAC1^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562421 ttsysman.go:67: Processing Task 2 Task Name IHA_Request Input Part Name LAC1^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562431 ttsysman.go:70: Task 2 Task Name IHA_Request Input Part LAC1^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562440 ttsysman.go:74: Checking Task 2 IHA_Request output LAC2^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562449 ttsysman.go:77: Task 2 IHA_Request output LAC2^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562459 ttsysman.go:74: Checking Task 3 IHA_Claimed output LAC3^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562469 ttsysman.go:77: Task 3 IHA_Claimed output LAC3^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562481 ttsysman.go:67: Processing Task 4 Task Name LAC_Paperwork_Sent Input Part Name LAC3^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562504 ttsysman.go:70: Task 4 Task Name LAC_Paperwork_Sent Input Part LAC3^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562518 ttsysman.go:74: Checking Task 4 LAC_Paperwork_Sent output LAC4^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562527 ttsysman.go:77: Task 4 LAC_Paperwork_Sent output LAC4^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562536 ttsysman.go:67: Processing Task 5 Task Name LAC_Paperwork_Accepted Input Part Name LAC4^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562544 ttsysman.go:70: Task 5 Task Name LAC_Paperwork_Accepted Input Part LAC4^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562553 ttsysman.go:74: Checking Task 5 LAC_Paperwork_Accepted output LAC5^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562561 ttsysman.go:77: Task 5 LAC_Paperwork_Accepted output LAC5^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562569 ttsysman.go:74: Checking Task 5 LAC_Paperwork_Accepted output LAC6^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562577 ttsysman.go:77: Task 5 LAC_Paperwork_Accepted output LAC6^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562587 ttsysman.go:67: Processing Task 6 Task Name LAC_IHA_Scheduled Input Part Name LAC5^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562594 ttsysman.go:70: Task 6 Task Name LAC_IHA_Scheduled Input Part LAC5^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562603 ttsysman.go:74: Checking Task 6 LAC_IHA_Scheduled output LAC7^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562610 ttsysman.go:77: Task 6 LAC_IHA_Scheduled output LAC7^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562620 ttsysman.go:74: Checking Task 7 Request_AMHP output LAC10^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562702 ttsysman.go:77: Task 7 Request_AMHP output LAC10^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562718 ttsysman.go:74: Checking Task 8 AMHP_Claimed_IHA output LAC10^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562727 ttsysman.go:77: Task 8 AMHP_Claimed_IHA output LAC10^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562736 ttsysman.go:67: Processing Task 9 Task Name LAC_IHA_Completed Input Part Name LAC10^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562745 ttsysman.go:70: Task 9 Task Name LAC_IHA_Completed Input Part LAC10^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562764 ttsysman.go:74: Checking Task 9 LAC_IHA_Completed output LAC8^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562790 ttsysman.go:77: Task 9 LAC_IHA_Completed output LAC8^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562800 ttsysman.go:67: Processing Task 10 Task Name IHA_Accepted Input Part Name LAC8^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562808 ttsysman.go:70: Task 10 Task Name IHA_Accepted Input Part LAC8^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562815 ttsysman.go:74: Checking Task 10 IHA_Accepted output LAC9^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562822 ttsysman.go:77: Task 10 IHA_Accepted output LAC9^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562830 ttsysman.go:74: Checking Task 10 IHA_Accepted output LAC10^^TypeCode_EPUT_2018
2023/09/05 17:22:37.562839 ttsysman.go:77: Task 10 IHA_Accepted output LAC10^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.562878 ttsysman.go:86: Creating 10 DSUB Broker Subscriptions for Document Type Codes [LAC2^^TypeCode_EPUT_2018 LAC4^^TypeCode_EPUT_2018 LAC5^^TypeCode_EPUT_2018 LAC7^^TypeCode_EPUT_2018 LAC8^^TypeCode_EPUT_2018 LAC1^^TypeCode_EPUT_2018 LAC3^^TypeCode_EPUT_2018 LAC6^^TypeCode_EPUT_2018 LAC10^^TypeCode_EPUT_2018 LAC9^^TypeCode_EPUT_2018]
2023/09/05 17:22:37.623636 ttsubs.go:58: Sending Subscribe Request for TypeCode LAC2^^TypeCode_EPUT_2018 to DSUB Broker http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2023/09/05 17:22:37.624090 tthttp.go:103: Request Headers 
map[Content-Type:[application/xml]]
2023/09/05 17:22:37.624156 tthttp.go:104: Request Body 

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xmlns:s='http://www.w3.org/2001/XMLSchema'
    xmlns:wsa='http://www.w3.org/2005/08/addressing'>
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:8a93ce22-3b75-4b11-9b13-cdb71c6ae60d</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand='true'>
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2'
            xmlns:a='http://www.w3.org/2005/08/addressing'
            xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0'
            xmlns:wsa='http://www.w3.org/2005/08/addressing'>
            <wsnt:ConsumerReference>
                <wsa:Address>https://fwa7l2kp71.execute-api.eu-west-1.amazonaws.com/beta/dsubconsumer</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression>
                <rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'>
                    <rim:Slot name=''>
                        <rim:ValueList>
                            <rim:Value>('LAC2^^TypeCode_EPUT_2018')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>
            </wsnt:Filter>
        </wsnt:Subscribe>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
2023/09/05 17:22:37.664060 tthttp.go:120: Server Response - Status Code 200 
<html><head><title>Tiani-Spirit 'XdsDsubBroker'</title></head><body><h1>Tiani-Spirit Web Service page for SUSI service 'SpiritXDSDsub/SpiritXDSDsub/XdsDsubBroker/'</h1><table width='100%' border='1'><tr><td>Endpoint</td><td>Information</td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}NotificationProducer-Subscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationUnSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}SubscriptionManager-UnSubscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr></table></body></html>
2023/09/05 17:22:37.664249 ttsysman.go:146: Persisting lac_def
2023/09/05 17:22:37.801586 ttsysman.go:159: Persisted lac_def XDW Definition
2023/09/05 17:22:37.802420 ttsysman.go:40: Registering spv_def.json
2023/09/05 17:22:37.802848 ttsysman.go:62: Marshalled spv_def XDW Definition
2023/09/05 17:22:37.802906 ttsysman.go:64: Processing spv_def
2023/09/05 17:22:37.802950 ttsysman.go:74: Checking Task 1 Secure_Transport_Scheduled output SPV1_Transport Scheduled
2023/09/05 17:22:37.802977 ttsysman.go:67: Processing Task 2 Task Name Secure_Patient_Admitted Input Part Name SPV1_Transport Scheduled
2023/09/05 17:22:37.802996 ttsysman.go:74: Checking Task 2 Secure_Patient_Admitted output SPV2_Patient Admitted
2023/09/05 17:22:37.803017 ttsysman.go:67: Processing Task 3 Task Name Secure_Patient_Discharged Input Part Name SPV2_Patient Admitted
2023/09/05 17:22:37.803038 ttsysman.go:74: Checking Task 3 Secure_Patient_Discharged output SPV3_Patient Discharged
2023/09/05 17:22:37.803056 ttsysman.go:67: Processing Task 4 Task Name Publish_Discharge_Notes Input Part Name SPV3_Patient Discharged
2023/09/05 17:22:37.803076 ttsysman.go:74: Checking Task 4 Publish_Discharge_Notes output SPV4^^TypeCode_EPUT_2018
2023/09/05 17:22:37.803107 ttsysman.go:77: Task 4 Publish_Discharge_Notes output SPV4^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:37.803150 ttsysman.go:86: Creating 1 DSUB Broker Subscriptions for Document Type Codes [SPV4^^TypeCode_EPUT_2018]
2023/09/05 17:22:37.864134 ttsubs.go:58: Sending Subscribe Request for TypeCode SPV4^^TypeCode_EPUT_2018 to DSUB Broker http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2023/09/05 17:22:37.864532 tthttp.go:103: Request Headers 
map[Content-Type:[application/xml]]
2023/09/05 17:22:37.864585 tthttp.go:104: Request Body 

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xmlns:s='http://www.w3.org/2001/XMLSchema'
    xmlns:wsa='http://www.w3.org/2005/08/addressing'>
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:d57486b0-9497-4b82-a23d-d9b4b9521df1</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand='true'>
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2'
            xmlns:a='http://www.w3.org/2005/08/addressing'
            xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0'
            xmlns:wsa='http://www.w3.org/2005/08/addressing'>
            <wsnt:ConsumerReference>
                <wsa:Address>https://fwa7l2kp71.execute-api.eu-west-1.amazonaws.com/beta/dsubconsumer</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression>
                <rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'>
                    <rim:Slot name=''>
                        <rim:ValueList>
                            <rim:Value>('SPV4^^TypeCode_EPUT_2018')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>
            </wsnt:Filter>
        </wsnt:Subscribe>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
2023/09/05 17:22:37.904223 tthttp.go:120: Server Response - Status Code 200 
<html><head><title>Tiani-Spirit 'XdsDsubBroker'</title></head><body><h1>Tiani-Spirit Web Service page for SUSI service 'SpiritXDSDsub/SpiritXDSDsub/XdsDsubBroker/'</h1><table width='100%' border='1'><tr><td>Endpoint</td><td>Information</td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}NotificationProducer-Subscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationUnSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}SubscriptionManager-UnSubscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr></table></body></html>
2023/09/05 17:22:37.904451 ttsysman.go:146: Persisting spv_def
2023/09/05 17:22:38.037945 ttsysman.go:159: Persisted spv_def XDW Definition
2023/09/05 17:22:38.038761 ttsysman.go:40: Registering eref_meta.json
2023/09/05 17:22:38.038930 ttsysman.go:146: Persisting eref_meta
2023/09/05 17:22:38.171269 ttsysman.go:159: Persisted eref_meta XDW Definition
2023/09/05 17:22:38.172033 ttsysman.go:40: Registering pathalert_meta.json
2023/09/05 17:22:38.172161 ttsysman.go:146: Persisting pathalert_meta
2023/09/05 17:22:38.304220 ttsysman.go:159: Persisted pathalert_meta XDW Definition
2023/09/05 17:22:38.304935 ttsysman.go:40: Registering radconsult_def.json
2023/09/05 17:22:38.305108 ttsysman.go:62: Marshalled radconsult_def XDW Definition
2023/09/05 17:22:38.305122 ttsysman.go:64: Processing radconsult_def
2023/09/05 17:22:38.305132 ttsysman.go:74: Checking Task 1 RAD1_Consult_Request output RAD1_Consult_Request
2023/09/05 17:22:38.305142 ttsysman.go:74: Checking Task 2 RAD2_Consult_Claimed output RAD2_Consult_Claimed
2023/09/05 17:22:38.305150 ttsysman.go:146: Persisting radconsult_def
2023/09/05 17:22:38.438125 ttsysman.go:159: Persisted radconsult_def XDW Definition
2023/09/05 17:22:38.439016 ttsysman.go:40: Registering pathalert_def.json
2023/09/05 17:22:38.439300 ttsysman.go:62: Marshalled pathalert_def XDW Definition
2023/09/05 17:22:38.439334 ttsysman.go:64: Processing pathalert_def
2023/09/05 17:22:38.439359 ttsysman.go:74: Checking Task 1 Path1_Consult_Requested output Path1_Request_Consult
2023/09/05 17:22:38.439380 ttsysman.go:74: Checking Task 2 Path2_Consult_Claimed output Path2_Consult_Claimed
2023/09/05 17:22:38.439400 ttsysman.go:74: Checking Task 3 Path3_Lab_Result_Published output Path3^^TypeCode_LPRES_2018
2023/09/05 17:22:38.439423 ttsysman.go:77: Task 3 Path3_Lab_Result_Published output Path3^^TypeCode_LPRES_2018 included in potential DSUB Broker subscriptions
2023/09/05 17:22:38.439480 ttsysman.go:86: Creating 1 DSUB Broker Subscriptions for Document Type Codes [Path3^^TypeCode_LPRES_2018]
2023/09/05 17:22:38.500047 ttsubs.go:58: Sending Subscribe Request for TypeCode Path3^^TypeCode_LPRES_2018 to DSUB Broker http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2023/09/05 17:22:38.500560 tthttp.go:103: Request Headers 
map[Content-Type:[application/xml]]
2023/09/05 17:22:38.500638 tthttp.go:104: Request Body 

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xmlns:s='http://www.w3.org/2001/XMLSchema'
    xmlns:wsa='http://www.w3.org/2005/08/addressing'>
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:0715f84e-d6b8-46a2-82f5-86072f554d3f</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand='true'>
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2'
            xmlns:a='http://www.w3.org/2005/08/addressing'
            xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0'
            xmlns:wsa='http://www.w3.org/2005/08/addressing'>
            <wsnt:ConsumerReference>
                <wsa:Address>https://fwa7l2kp71.execute-api.eu-west-1.amazonaws.com/beta/dsubconsumer</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression>
                <rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'>
                    <rim:Slot name=''>
                        <rim:ValueList>
                            <rim:Value>('Path3^^TypeCode_LPRES_2018')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>
            </wsnt:Filter>
        </wsnt:Subscribe>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
2023/09/05 17:22:38.538976 tthttp.go:120: Server Response - Status Code 200 
<html><head><title>Tiani-Spirit 'XdsDsubBroker'</title></head><body><h1>Tiani-Spirit Web Service page for SUSI service 'SpiritXDSDsub/SpiritXDSDsub/XdsDsubBroker/'</h1><table width='100%' border='1'><tr><td>Endpoint</td><td>Information</td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}NotificationProducer-Subscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr><tr><td><table border="0"><tr><td>Service Name:</td><td>{urn:ihe:iti:xds-b:2007}WS-BrokeredNotificationUnSubscribe_Service</td></tr><tr><td>Port Name:</td><td>{urn:ihe:iti:xds-b:2007}SubscriptionManager-UnSubscribe</td></tr></table></td><td><table border="0"><tr><td>Address:</td><td>http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</td></tr><tr><td>WSDL:</td><td><a href="http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl">http://lac-demo-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub?wsdl</a></td></tr><tr><td>Implementation class:</td><td>com.spirit.xds.dsub.XdsDsubService</td></tr></table></td></tr></table></body></html>
2023/09/05 17:22:38.539179 ttsysman.go:146: Persisting pathalert_def
2023/09/05 17:22:38.668951 ttsysman.go:159: Persisted pathalert_def XDW Definition
2023/09/05 17:22:38.669781 ttsysman.go:40: Registering spv_meta.json
2023/09/05 17:22:38.669966 ttsysman.go:146: Persisting spv_meta
2023/09/05 17:22:38.811143 ttsysman.go:159: Persisted spv_meta XDW Definition
2023/09/05 17:22:38.812185 ttsysman.go:40: Registering eref_def.json
2023/09/05 17:22:38.812462 ttsysman.go:62: Marshalled eref_def XDW Definition
2023/09/05 17:22:38.812509 ttsysman.go:64: Processing eref_def
2023/09/05 17:22:38.812534 ttsysman.go:74: Checking Task 1 E-Referral_Requested output EREF1_Request Referral
2023/09/05 17:22:38.812556 ttsysman.go:74: Checking Task 2 E-Referral_Claimed output EREF2_Referral Claimed
2023/09/05 17:22:38.812575 ttsysman.go:146: Persisting eref_def
2023/09/05 17:22:38.988997 ttsysman.go:159: Persisted eref_def XDW Definition
2023/09/05 17:22:38.989711 ttsysman.go:40: Registering toc_meta.json
2023/09/05 17:22:38.989825 ttsysman.go:146: Persisting toc_meta
2023/09/05 17:22:39.172641 ttsysman.go:159: Persisted toc_meta XDW Definition
2023/09/05 17:22:39.173539 ttsysman.go:40: Registering lac_meta.json
2023/09/05 17:22:39.173851 ttsysman.go:146: Persisting lac_meta
2023/09/05 17:22:39.305824 ttsysman.go:159: Persisted lac_meta XDW Definition
2023/09/05 17:22:39.306383 ttsysman.go:40: Registering d2a_meta.json
2023/09/05 17:22:39.306516 ttsysman.go:146: Persisting d2a_meta
2023/09/05 17:22:39.438409 ttsysman.go:159: Persisted d2a_meta XDW Definition
2023/09/05 17:22:39.439176 ttproxy.go:149: Response Status Code 200
2023/09/05 18:01:30.344265 ttserver.go:50: ICB Workflow Service stopped
